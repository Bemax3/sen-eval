import{o as i,c as _,a as e,d as g,x as E,t as r,T as I,b as H,e as a,f as t,u as l,Z as O,i as j,g as n,p as B,n as m,k,j as v,F as y,O as L}from"./app-74a7ed68.js";import{r as M,b as $,_ as P}from"./AuthenticatedLayout-c5d98272.js";import{_ as Z}from"./Breadcrumbs-9ec19463.js";import{_ as D}from"./SectionTitle-4423edbb.js";import{_ as N}from"./InputLabel-821b8b0a.js";import{_ as G}from"./SubmitButton-a4088352.js";import{_ as x,b as u,a as J}from"./EmptyState-dc589c25.js";import{S as K}from"./SimpleTable-9a8180cb.js";import{r as F}from"./ChevronUpDownIcon-7cddf03d.js";import{r as S}from"./CheckIcon-9bf2de54.js";import{N as q,H as A,U as V,B as C}from"./listbox-a2068e7f.js";import"./logo1637145113-c7398df9.js";import"./use-controllable-8a68f84c.js";const Q={class:"rounded-lg bg-white px-4 pt-5 shadow sm:px-6 sm:pt-6"},R={class:"absolute rounded-md bg-cyan-600 p-3"},W={class:"ml-16 truncate text-sm font-medium text-gray-500"},X={class:"ml-16 flex items-baseline"},Y={class:"text-2xl font-semibold text-cyan-600"},ee={__name:"Indicator",props:{name:{},value:{},icon:{}},setup(d){return(f,T)=>(i(),_("div",Q,[e("dt",null,[e("div",R,[(i(),g(E(d.icon),{"aria-hidden":"true",class:"h-6 w-6 text-white"}))]),e("p",W,r(d.name),1)]),e("dd",X,[e("p",Y,r(d.value),1)])]))}},te={class:"px-4 sm:px-6 lg:px-8"},se=e("div",{class:"sm:flex sm:items-center"},[e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-2xl font-semibold leading-6 text-gray-900"},"Dashboard"),e("p",{class:"mt-2 text-sm text-gray-700"}," Statistiques des évaluations. ")])],-1),ae={class:"mt-8 bg-white shadow sm:rounded-lg"},le={class:"px-4 py-5 sm:p-6"},ne=e("h3",{class:"text-base font-semibold leading-6 text-gray-900"},"Filtres",-1),oe=e("div",{class:"mt-2 max-w-xl text-sm text-gray-500"},[e("p",null,"Filtrer les données en fonction de l'année et de la direction")],-1),ie=["onSubmit"],re={class:"w-full sm:max-w-xl"},de={class:"mt-2"},ce={class:"relative mt-2"},ue={class:"block truncate"},me={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},_e={class:"w-full sm:max-w-xl"},fe={class:"mt-2"},pe={class:"relative mt-2"},he={class:"block truncate"},ge={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},xe={class:"mt-7"},be={class:"mt-8 sm:flex sm:items-center"},ve={class:"sm:flex-auto"},ye={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"},we={class:"mt-8 sm:flex sm:items-center"},ke={class:"sm:flex-auto"},$e={class:"min-w-full divide-y divide-gray-300"},Se={class:"bg-gray-50"},Ve={class:"divide-y divide-gray-200 bg-white"},Oe={__name:"AdminDashboard",props:{users:{},orgs:{},rated:{},not_rated:{},not_validated:{},phases:{},phase:{},org:{},trainings:{}},setup(d){const f=d,T=[{id:1,name:"Total des Agents",stat:f.users,icon:M},{id:3,name:"Évaluations validées",stat:f.rated,icon:$},{id:3,name:"Évaluations non validées",stat:f.not_validated,icon:$},{id:4,name:"Non évalué",stat:f.not_rated,icon:$}],U=[{name:"Statistiques",href:"#",current:!0}],p=I({phase_id:parseInt(f.phase),org_id:parseInt(f.org)}),z=()=>{L.get(route("admin-dashboard.index",{phase_id:p.phase_id,org_id:p.org_id}))},b=H(()=>{let w=0,h=0,s=0,o=0;return f.trainings.forEach(c=>{w+=c.trainings_by_evaluators,h+=c.trainings_by_evaluated,s+=c.asked_by_both,o+=c.trainings_count}),{by_evaluators:w,by_evaluated:h,by_both:s,all:o}});return(w,h)=>(i(),g(P,null,{default:a(()=>[t(l(O),{title:"Statistiques"}),e("div",te,[t(Z,{pages:U}),se,e("div",ae,[e("div",le,[ne,oe,e("form",{class:"mt-5 sm:flex sm:items-center gap-10",onSubmit:j(z,["prevent"])},[e("div",re,[t(N,null,{default:a(()=>[n("Direction")]),_:1}),e("div",de,[t(l(C),{modelValue:l(p).org_id,"onUpdate:modelValue":h[0]||(h[0]=s=>l(p).org_id=s),as:"div"},{default:a(()=>[e("div",ce,[t(l(q),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:a(()=>{var s;return[e("span",ue,r(((s=d.orgs.filter(o=>o.org_id===l(p).org_id)[0])==null?void 0:s.org_name)||"Tout"),1),e("span",me,[t(l(F),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]}),_:1}),t(B,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:a(()=>[t(l(A),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:a(()=>[t(l(V),{value:-1,as:"template"},{default:a(({active:s,selected:o})=>[e("li",{class:m([s?"bg-cyan-600  text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:m([o?"font-semibold":"font-normal","block truncate"])},"Tout",2),o?(i(),_("span",{key:0,class:m([s?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[t(l(S),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:1}),(i(!0),_(y,null,v(d.orgs,s=>(i(),g(l(V),{key:s.org_id,value:s.org_id,as:"template"},{default:a(({active:o,selected:c})=>[e("li",{class:m([o?"bg-cyan-600  text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:m([c?"font-semibold":"font-normal","block truncate"])},r(s.org_name),3),c?(i(),_("span",{key:0,class:m([o?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[t(l(S),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",_e,[t(N,null,{default:a(()=>[n("Année d'évaluation")]),_:1}),e("div",fe,[t(l(C),{modelValue:l(p).phase_id,"onUpdate:modelValue":h[1]||(h[1]=s=>l(p).phase_id=s),as:"div"},{default:a(()=>[e("div",pe,[t(l(q),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:a(()=>{var s;return[e("span",he,r((s=d.phases.filter(o=>o.phase_id===l(p).phase_id)[0])==null?void 0:s.phase_year),1),e("span",ge,[t(l(F),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]}),_:1}),t(B,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:a(()=>[t(l(A),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:a(()=>[(i(!0),_(y,null,v(d.phases,s=>(i(),g(l(V),{key:s.phase_id,value:s.phase_id,as:"template"},{default:a(({active:o,selected:c})=>[e("li",{class:m([o?"bg-cyan-600  text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:m([c?"font-semibold":"font-normal","block truncate"])},r(s.phase_year),3),c?(i(),_("span",{key:0,class:m([o?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[t(l(S),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",xe,[t(G,{class:"sm:ml-3 sm:mt-0 sm:w-auto",type:"submit"},{default:a(()=>[n("Filtrer")]),_:1})])],40,ie)])]),e("div",be,[e("div",ve,[t(D,{title:"Statistiques"})])]),e("dl",ye,[(i(),_(y,null,v(T,s=>t(ee,{key:s.id,icon:s.icon,name:s.name,value:s.stat,class:"relative overflow-hidden rounded-lg bg-white px-4 pb-12 pt-5 shadow sm:px-6 sm:pt-6"},null,8,["icon","name","value"])),64))]),e("div",we,[e("div",ke,[t(D,{title:"Besoins en Formations"})])]),d.trainings.length>0?(i(),g(K,{key:0},{default:a(()=>[e("table",$e,[e("thead",Se,[e("tr",null,[t(x,{first:!0},{default:a(()=>[n("Domaine")]),_:1}),t(x,{class:"whitespace-nowrap"},{default:a(()=>[n("Proposée par la hiérarchie")]),_:1}),t(x,{class:"whitespace-pre-line"},{default:a(()=>[n("Souhaitée par les agents")]),_:1}),t(x,{class:"whitespace-pre-line"},{default:a(()=>[n("Exprimés par les deux parties")]),_:1}),t(x,null,{default:a(()=>[n("Totaux")]),_:1})])]),e("tbody",Ve,[(i(!0),_(y,null,v(d.trainings,s=>(i(),_("tr",{key:s.training_type_id},[t(u,{first:!0},{default:a(()=>[n(r(s.training_type_name),1)]),_:2},1024),t(u,null,{default:a(()=>[n(r(s.trainings_by_evaluators),1)]),_:2},1024),t(u,null,{default:a(()=>[n(r(s.trainings_by_evaluated),1)]),_:2},1024),t(u,null,{default:a(()=>[n(r(s.asked_by_both),1)]),_:2},1024),t(u,{class:"font-bold"},{default:a(()=>[n(r(s.trainings_count),1)]),_:2},1024)]))),128)),e("tr",null,[t(u,{first:!0},{default:a(()=>[n("Totaux")]),_:1}),t(u,{class:"font-bold"},{default:a(()=>[n(r(b.value.by_evaluators),1)]),_:1}),t(u,{class:"font-bold"},{default:a(()=>[n(r(b.value.by_evaluated),1)]),_:1}),t(u,{class:"font-bold"},{default:a(()=>[n(r(b.value.by_both),1)]),_:1}),t(u,{class:"font-bold"},{default:a(()=>[n(r(b.value.all),1)]),_:1})])])])]),_:1})):(i(),g(J,{key:1,title:"Aucun besoin en formation exprimé."}))])]),_:1}))}};export{Oe as default};
