import{b as T,r as A,d as F,T as S,w as $,o as d,e as b,f as s,g as e,u as n,Z as U,a as t,t as r,k as l,m as w,h as Y,p as z,n as f,c as _,j,i as V,F as O,O as v,l as H}from"./app-85fecfce.js";import{_ as I,g as L,h as P,c as E,m as G}from"./AuthenticatedLayout-33b88696.js";import{_ as Z}from"./Breadcrumbs-4927dda0.js";import{_ as q}from"./Datatable-9fd4742e.js";import{r as J,_ as K}from"./EmptyState-3e6b0729.js";import{_ as u,a as g}from"./TableData-75c0753e.js";import{_ as Q}from"./SectionTitle-dcc4355f.js";import{_ as R}from"./Separator-b4eabf35.js";import{_ as W}from"./InputLabel-e5ba497b.js";import{_ as X}from"./SubmitButton-78d2e83f.js";import{r as ee}from"./ChevronDoubleRightIcon-471e0ce3.js";import{N as te,H as se,U as M,B as ae}from"./listbox-1dfbff28.js";import{r as ne}from"./ChevronUpDownIcon-226cc4e2.js";import{r as N}from"./CheckIcon-c05fb05a.js";import{r as le}from"./EyeIcon-c68a30e1.js";import{r as ie}from"./TrashIcon-e8a6a5a5.js";import"./logo1637145113-c7398df9.js";import"./use-controllable-d8497fa4.js";const oe={class:"px-4 sm:px-6 lg:px-8"},re={class:"sm:flex sm:items-center"},de={class:"sm:flex-auto"},ce={class:"text-2xl font-semibold leading-6 text-gray-900"},ue={class:"mt-2 text-sm text-gray-700"},me={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},fe={class:"sm:flex sm:items-center border-b border-gray-400 pb-5"},_e={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},ge={class:"mt-8 bg-white shadow sm:rounded-lg"},pe={class:"px-4 py-5 sm:p-6"},he=t("h3",{class:"text-base font-semibold leading-6 text-gray-900"},"Filtres",-1),xe=t("div",{class:"mt-2 max-w-xl text-sm text-gray-500"},[t("p",null,"Filtrer les données en fonction de l'année et de la direction")],-1),ye=["onSubmit"],be={class:"w-full sm:max-w-xl"},ve={class:"mt-2"},we={class:"relative mt-2"},ke={class:"block truncate"},$e={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},je={class:"mt-8"},Ve={key:0,class:"min-w-full divide-y divide-gray-300"},Oe={class:"bg-gray-50"},Me={class:"divide-y divide-gray-200 bg-white"},Ne={class:"flex-shrink-0"},Be={class:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-cyan-600"},Ce={class:"text-cyan-700"},De={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},Te={class:"flex items-center justify-center"},Ae=["onClick"],Fe={key:1,class:"text-center bg-white text-lg text-gray-600 py-4"},et={__name:"AgentGoals",props:{agent:{type:Object},goals:{type:Object},phases:{},phase_id:{}},setup(i){const m=i,B=[{name:"Mes Agents",href:route("agents.index"),current:!1},{name:"Objectifs",href:"#",current:!0}],C=T(()=>L(m.goals)),p=A(m.goals.data),x=F({keyword:"",fields:["goal_name","goal_expected_result"]}),y=S({phase_id:parseInt(m.phase_id)||-1}),D=()=>{v.get(route("agent-goals.index",{agent:m.agent.user_id,phase_id:y.phase_id}),{},{preserveScroll:!0})};return $(()=>x.keyword,function(o){o===""?p.value=m.goals.data:H.post(route("agent-goals.search",{agent:m.agent.user_id}),x).then(h=>p.value=h.data)}),$(()=>m.goals,function(o){p.value=o.data,!p.value.length>0&&(o.prev_page_url?v.get(o.prev_page_url):v.get(o.first_page_url))}),(o,h)=>(d(),b(I,null,{default:s(()=>[e(n(U),{title:"Objectifs - Agents"}),t("div",oe,[e(Z,{pages:B}),t("div",re,[t("div",de,[t("h1",ce,"Objectifs de "+r(i.agent.user_display_name),1),t("p",ue," Objectifs de "+r(i.agent.user_display_name)+". Matricule : "+r(i.agent.user_matricule),1)]),t("div",me,[e(n(w),{href:o.route("agent-ratings.index",{agent:i.agent.user_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:s(()=>[l(" Évaluations "),e(n(ee),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),e(R,{title:"Objectifs"}),t("div",fe,[e(Q,{desc:"Tableau déscriptif des objectifs fixés à cet agent.",title:"Objectifs de l'agent"}),t("div",_e,[e(n(w),{href:o.route("agent-goals.create",{agent:i.agent.user_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:s(()=>[l(" Nouveau "),e(n(J),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),t("div",ge,[t("div",pe,[he,xe,t("form",{class:"mt-5 sm:flex sm:items-center gap-2",onSubmit:Y(D,["prevent"])},[t("div",be,[e(W,null,{default:s(()=>[l("Année d'évaluation")]),_:1}),t("div",ve,[e(n(ae),{modelValue:n(y).phase_id,"onUpdate:modelValue":h[0]||(h[0]=a=>n(y).phase_id=a),as:"div"},{default:s(()=>[t("div",we,[e(n(te),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:s(()=>{var a;return[t("span",ke,r(((a=i.phases.filter(c=>c.phase_id===n(y).phase_id)[0])==null?void 0:a.phase_year)||"Toute confondues"),1),t("span",$e,[e(n(ne),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]}),_:1}),e(z,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:s(()=>[e(n(se),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:s(()=>[e(n(M),{value:-1,as:"template"},{default:s(({active:a,selected:c})=>[t("li",{class:f([a?"bg-cyan-600  text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[t("span",{class:f([c?"font-semibold":"font-normal","block truncate"])},"Toute confondues",2),c?(d(),_("span",{key:0,class:f([a?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[e(n(N),{"aria-hidden":"true",class:"h-5 w-5"})],2)):j("",!0)],2)]),_:1}),(d(!0),_(O,null,V(i.phases,a=>(d(),b(n(M),{key:a.phase_id,value:a.phase_id,as:"template"},{default:s(({active:c,selected:k})=>[t("li",{class:f([c?"bg-cyan-600  text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[t("span",{class:f([k?"font-semibold":"font-normal","block truncate"])},r(a.phase_year),3),k?(d(),_("span",{key:0,class:f([c?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[e(n(N),{"aria-hidden":"true",class:"h-5 w-5"})],2)):j("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),t("div",je,[e(X,{class:"sm:ml-3 sm:mt-0 sm:w-auto",type:"submit"},{default:s(()=>[l("Filtrer")]),_:1})])],40,ye)])]),n(P)(i.goals.data)?(d(),b(q,{key:0,modelValue:x.keyword,"onUpdate:modelValue":h[1]||(h[1]=a=>x.keyword=a),pagination:C.value},{default:s(()=>[p.value.length>0?(d(),_("table",Ve,[t("thead",Oe,[t("tr",null,[e(u,{first:!0},{default:s(()=>[l("Libelle")]),_:1}),e(u,null,{default:s(()=>[l("Valeur Cible")]),_:1}),e(u,null,{default:s(()=>[l("Disponibilité des Moyens")]),_:1}),e(u,null,{default:s(()=>[l("Échéance")]),_:1}),e(u,null,{default:s(()=>[l("Taux de réalisation")]),_:1}),e(u,null,{default:s(()=>[l("Année d'évaluation")]),_:1}),e(u,null,{default:s(()=>[l("Barème")]),_:1}),e(u)])]),t("tbody",Me,[(d(!0),_(O,null,V(p.value,a=>(d(),_("tr",{key:a.goal_id},[e(g,{first:!0,class:"whitespace-pre-line"},{default:s(()=>[l(r(a.goal_name),1)]),_:2},1024),e(g,{class:"whitespace-pre-line"},{default:s(()=>[l(r(a.goal_expected_result),1)]),_:2},1024),e(g,null,{default:s(()=>[t("span",{class:f([a.goal_means_available?"bg-green-50 text-green-700 ring-green-600/20":"bg-red-50 text-red-700 ring-red-600/20","inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"])},r(a.goal_means_available?"Disponible":"Indisponible"),3)]),_:2},1024),e(g,null,{default:s(()=>[l(r(n(E)(n(G)(a.goal_expected_date).format("DD MMMM YYYY"))),1)]),_:2},1024),e(g,{class:"whitespace-break-spaces"},{default:s(()=>[l(r(a.goal_rate)+" % ",1)]),_:2},1024),e(g,{class:"whitespace-break-spaces"},{default:s(()=>[l(r(a.phase.phase_year),1)]),_:2},1024),e(g,null,{default:s(()=>[t("span",Ne,[t("span",Be,[t("span",Ce,r(a.goal_marking),1)])])]),_:2},1024),t("td",De,[t("div",Te,[e(n(w),{href:o.route("agent-goals.edit",{agent:i.agent.user_id,agent_goal:a.goal_id}),class:"group flex items-center px-4 py-2 text-sm"},{default:s(()=>[e(n(le),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-cyan-600"})]),_:2},1032,["href"]),t("button",{class:"group flex items-center px-4 py-2 text-sm",onClick:c=>n(v).delete(o.route("agent-goals.destroy",{agent:i.agent.user_id,agent_goal:a.goal_id}))},[e(n(ie),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-red-600"})],8,Ae)])])]))),128))])])):(d(),_("div",Fe," Aucun élément trouvé."))]),_:1},8,["modelValue","pagination"])):(d(),b(K,{key:1,link:o.route("agent-goals.create",{agent:i.agent.user_id}),action:"Nouveau",message:"Créer un objectif en appuyant sur ce bouton",title:"Pas d'objectifs"},null,8,["link"]))])]),_:1}))}};export{et as default};
