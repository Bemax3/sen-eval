import{Q as S,T as J,h as re,b as X,r as M,w as I,o as a,d as b,e as g,f as l,u as s,Z as ne,a as t,c as i,g as w,i as A,n as y,t as c,p as oe,F as h,j as Y,k as m,O as T,q as de,s as ce,m as ue}from"./app-c51809d2.js";import{_ as me}from"./AuthenticatedLayout-b0b54744.js";import{_ as _e}from"./Breadcrumbs-6cd41b84.js";import{_ as ge,a as fe}from"./Title-3522fcb7.js";import{_ as P}from"./InputLabel-be02b7d5.js";import{_ as R}from"./SubmitButton-42dd88ba.js";import{a as N,c as H,m as z}from"./helper-f88ff6de.js";import{_ as pe}from"./TextArea-99af695b.js";import{_ as he}from"./FormIndications-38155857.js";import{_ as D,a as ve,b as ke}from"./ValidationWarning-b83dea7f.js";import{b as B}from"./EmptyState-ab9bb41f.js";import{_ as Z}from"./InputError-9650500a.js";import{_ as ye}from"./TextInput-b3209f14.js";import{r as K}from"./ChevronUpDownIcon-f3f22d97.js";import{r as $}from"./CheckIcon-37fba7ec.js";import{r as L}from"./PencilSquareIcon-5c661c37.js";import{r as xe}from"./TrashIcon-b4cb54e4.js";import{N as be,H as we,U as Ce,B as $e}from"./listbox-91d0ad42.js";import{Q as je,G as Ve,X as Se,Y as Me,J as Ye}from"./combobox-c6ddbcc4.js";import"./logo1637145113-c7398df9.js";import"./SimpleTable-ac30a7da.js";import"./ExclamationTriangleIcon-a9712964.js";import"./use-controllable-abfeee94.js";const Ne={class:"px-4 sm:px-6 lg:px-8"},De={role:"list"},Ee={class:"px-4 py-4 sm:px-0"},Oe={key:0,class:"pr-4 py-5 sm:pr-6 bg-white dark:bg-grayish mb-4 px-5 rounded-lg shadow"},qe=["onSubmit"],Ae={class:"relative"},Te={key:0,class:"block truncate"},He={key:1,class:"block truncate"},ze={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Be={key:0,class:"w-full sm:max-w-xl mt-4 sm:mt-0"},Le={class:"flex flex-col space-y-2"},Ue={key:1,class:"divide-y divide-gray-100 dark:divide-gray-600",role:"list"},Fe={class:"min-w-0"},Ge={class:"flex items-start gap-x-3"},Qe={class:"text-base font-bold leading-6 text-gray-900 dark:text-white"},Je={key:0,class:"text-red-700 bg-red-50 ring-red-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"},Xe={class:"mt-1 flex items-center gap-x-2 text-base leading-5 text-gray-500 dark:text-gray-100"},Ie={class:"whitespace-break-spaces"},Pe={key:0,class:"mt-1 flex items-center gap-x-2 text-sm leading-5 text-gray-500 dark:text-gray-100"},Re={class:"whitespace-break-spaces"},Ze={class:"flex flex-none items-center gap-x-4"},Ke={class:"flex items-center justify-center space-x-4 text-gray-900 dark:text-white"},We=["value"],et={class:"ml-0.5 font-bold"},tt=["onClick"],st=["onClick"],at=["onClick"],it={class:"px-4 py-4 sm:px-0"},lt={key:0,class:"divide-y divide-gray-100 dark:divide-gray-600",role:"list"},rt={class:"min-w-0"},nt={class:"flex items-start gap-x-3"},ot={class:"text-base font-bold leading-6 text-gray-900 dark:text-white"},dt={key:0,class:"text-red-700 bg-red-50 ring-red-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"},ct={class:"mt-1 flex items-center gap-x-2 text-base leading-5 text-gray-500 dark:text-gray-100"},ut={class:"whitespace-break-spaces"},mt={key:0,class:"mt-1 flex items-center gap-x-2 text-sm leading-5 text-gray-500 dark:text-gray-100"},_t={class:"whitespace-break-spaces"},gt={class:"flex flex-none items-center gap-x-4"},ft={class:"flex items-center justify-center space-x-4 text-gray-900 dark:text-white"},pt=["value"],ht={class:"ml-0.5 font-bold"},vt=["onClick"],kt=["onClick"],yt={class:"px-4 py-4 sm:px-0"},xt={key:0,class:"divide-y divide-gray-100 dark:divide-gray-600",role:"list"},bt={class:"min-w-0"},wt={class:"flex items-start gap-x-3"},Ct={class:"text-base font-bold leading-6 text-gray-900 dark:text-white"},$t={class:"text-white bg-gray-500 ring-gray-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"},jt={key:0,class:"text-red-700 bg-red-50 ring-red-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"},Vt={class:"mt-1 flex items-center gap-x-2 text-base leading-5 text-gray-500 dark:text-gray-100"},St={class:"whitespace-break-spaces"},Mt={key:0,class:"mt-1 flex items-center gap-x-2 text-sm leading-5 text-gray-500 dark:text-gray-100"},Yt={class:"whitespace-break-spaces"},Nt={class:"flex flex-none items-center gap-x-4"},Dt={class:"flex items-center justify-center space-x-4 text-gray-900 dark:text-white"},Et=["value"],Ot={class:"ml-0.5 font-bold"},qt=["onClick"],At=["onClick"],Tt={class:"px-4 py-4 sm:px-0"},Ht={key:0},zt={class:"px-4 py-4 sm:px-0"},Bt={class:"mt-8 bg-white dark:bg-grayish shadow sm:rounded-lg"},Lt=["onSubmit"],Ut={class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},Ft={class:"px-4 py-5 sm:p-6"},Gt=t("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"},"Commentaire",-1),Qt=t("div",{class:"mt-2 max-w-xl text-sm text-gray-500 dark:text-gray-100"},[t("p",null,"Ajouter un commentaire. ")],-1),Jt={class:"mt-5 sm:flex sm:items-center"},Xt={class:"w-full sm:max-w-xl"},It={class:"col-span-full"},Pt={class:"mt-2"},Rt={class:"px-4 py-5 sm:p-6"},Zt=t("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"},"Transférer",-1),Kt=t("div",{class:"mt-2 max-w-xl text-sm text-gray-500 dark:text-gray-100"},[t("p",null,"Transférer l'évaluation au supérieur hiérarchique. ")],-1),Wt={class:"mt-6 w-full sm:max-w-xl"},es={class:"relative"},ts={class:"flex"},ss={class:"mt-3 flex items-center"},as=t("label",{class:"ml-3 block text-sm leading-6 text-gray-900 dark:text-white",for:"remember-n1"},"Sauvegarder en tant que mon N + 1",-1),is={class:"flex items-center justify-between gap-x-6 border-t border-gray-900/10 px-4 py-4 sm:px-8"},ls=["disabled"],Ms={__name:"AgentRatingSkills",props:{rating:{type:Object},marking:{type:Object},agent:{type:Object},specific_skill_types:{},specific_skills:{type:Object},skills:{type:Object},goals:{type:Object},n1:{type:Object},others:{},validators:{}},setup(r){var G,Q;const u=r,W=S().props.auth.user,ee=[{name:"Mes Agents",href:route("agents.index"),current:!1},{name:"Évaluations",href:route("agent-ratings.index",{agent:u.agent.user_id}),current:!1}],f=J({rating_id:u.rating.rating_id,rating_skill_name:"",phase_skill_id:u.specific_skill_types[0]?u.specific_skill_types[0].pivot.phase_skill_id:null}),U=re({keyword:"",fields:["user_matricule","user_display_name"]}),v=X(()=>u.validators.filter(n=>n.validator_id===W.user_id)[0]),p=J({remember:!1,validator_id:(G=v.value)==null?void 0:G.validator_id,rating_validator_comment:((Q=v.value)==null?void 0:Q.rating_validator_comment)||"",new_validator:u.n1?u.n1.user_id:u.others[0].user_id}),O=u.others,E=M(""),j=M(O),k=M([]),V=M([]),q=M(!1),te=X(()=>{let n=0;return u.goals.forEach(d=>n+=d.goal_mark),n}),se=()=>{p.put(route("validations.update",{validation:v.value.rating_validator_id}),{onError:n=>{S().props.flash.notify={type:"error",message:n.rating_validator_comment}},preserveScroll:!0})},ae=()=>ue.post(route("users.search"),U),x=()=>{k.value=[],u.skills.forEach(n=>k.value.push({id:n.rating_skill_id,edit:n.rating_skill_mark<0})),u.goals.forEach(n=>k.value.push({id:"goal_"+n.goal_id,edit:n.goal_mark<0})),u.specific_skills.forEach(n=>k.value.push({id:n.rating_skill_id,edit:n.rating_skill_mark<0}))},C=n=>k.value.filter(d=>d.id===n)[0].edit,F=(n,d)=>{const e=V.value[n];k.value.find(o=>o.id===n).edit=!1,T.put(route("rating-skills.update",{rating_skill:n}),{rating_skill_mark:e.value,rating_skill_marking:d},{onSuccess:()=>x(),onError:o=>{x(),console.log(o),S().props.flash.notify={type:"error",message:o.rating_skill_mark}},preserveScroll:!0})},ie=(n,d)=>{const e=V.value["goal_"+n];k.value.find(o=>o.id==="goal_"+n).edit=!1,T.put(route("goals.update-mark",{goal:n}),{goal_mark:e.value,goal_marking:d,rating_id:u.rating.rating_id},{onSuccess:()=>x(),onError:o=>{x(),S().props.flash.notify={type:"error",message:o.goal_mark}},preserveScroll:!0})},le=()=>{f.post(route("rating-skills.store"),{onError:n=>{x(),S().props.flash.notify={type:"error",message:n.phase_skill_id}},onSuccess:()=>x(),preserveScroll:!0})};return x(),I(()=>u.specific_skills,function(){x()},{immediate:!0}),I(()=>E.value,function(n){let d=n===""?O:O.filter(e=>e.user_matricule.toLowerCase().includes(E.value.toLowerCase())||e.user_display_name.toLowerCase().includes(E.value.toLowerCase()));d.length>0?j.value=d:n.length>=3&&ae().then(e=>j.value=e.data)}),(n,d)=>(a(),b(me,null,{default:g(()=>[l(s(ne),{title:"Évaluation"}),t("div",Ne,[l(_e,{pages:ee}),l(ge,{agent:r.agent,rating:r.rating},null,8,["agent","rating"]),l(fe,{agent_id:u.agent.user_id,rating_id:u.rating.rating_id},null,8,["agent_id","rating_id"]),t("div",De,[t("div",Ee,[r.rating.rating_is_validated?m("",!0):(a(),i("div",Oe,[l(P,null,{default:g(()=>[w("Ajouter une compétence spécifique à évaluer")]),_:1}),t("form",{class:"mt-5 sm:flex sm:items-center gap-x-6",onSubmit:A(le,["prevent"])},[t("div",{class:y([s(f).errors.rating_skill_name?"mb-4":"","w-full sm:max-w-xl"])},[l(s($e),{modelValue:s(f).phase_skill_id,"onUpdate:modelValue":d[0]||(d[0]=e=>s(f).phase_skill_id=e),as:"div"},{default:g(()=>[t("div",Ae,[l(s(be),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-grayish py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:g(()=>[s(N)(r.specific_skill_types)?(a(),i("span",Te,c(r.specific_skill_types.filter(e=>e.pivot.phase_skill_id===s(f).phase_skill_id)[0].skill_name),1)):(a(),i("span",He,"Aucune compétences disponible pour l'instant.")),t("span",ze,[l(s(K),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),l(oe,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:g(()=>[s(N)(r.specific_skill_types)?(a(),b(s(we),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:g(()=>[(a(!0),i(h,null,Y(r.specific_skill_types,e=>(a(),b(s(Ce),{key:e.skill_id,value:e.pivot.phase_skill_id,as:"template"},{default:g(({active:o,selected:_})=>[t("li",{class:y([o?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[t("span",{class:y([_?"font-semibold":"font-normal","block truncate"])},c(e.skill_name),3),_?(a(),i("span",{key:0,class:y([o?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[l(s($),{"aria-hidden":"true",class:"h-5 w-5"})],2)):m("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):m("",!0)]),_:1})])]),_:1},8,["modelValue"])],2),r.specific_skill_types.filter(e=>e.pivot.phase_skill_id===s(f).phase_skill_id)[0].skill_id===1?(a(),i("div",Be,[l(ye,{modelValue:s(f).rating_skill_name,"onUpdate:modelValue":d[1]||(d[1]=e=>s(f).rating_skill_name=e),invalid:s(f).errors.rating_skill_name!==void 0,placeholder:"p. ex. Bonne Gouvernance des SI"},null,8,["modelValue","invalid"]),t("div",Le,[l(Z,{message:s(f).errors.rating_skill_name},null,8,["message"])])])):m("",!0),l(R,{class:y([s(f).errors.rating_skill_name?"mb-4":"","mt-2 sm:ml-3 sm:mt-0 sm:w-auto"]),disabled:r.rating.rating_is_validated,processing:s(f).processing,type:"submit"},{default:g(()=>[w("Ajouter ")]),_:1},8,["class","disabled","processing"])],40,qe)])),l(D,{mark:r.rating.specific_skills_sum_rating_skill_mark,marking:r.marking.specific,title:"Compétences Spécifiques (Savoir, Savoir Faire, Savoir Être)"},null,8,["mark","marking"]),s(N)(r.specific_skills)?(a(),i("ul",Ue,[(a(!0),i(h,null,Y(r.specific_skills,e=>(a(),i("li",{key:e.rating_skill_id,class:"flex items-center justify-between gap-x-6 py-5"},[t("div",Fe,[t("div",Ge,[t("p",Qe,c(e.rating_skill_name||e.phase_skill.skill.skill_name),1),e.rating_skill_mark_is_claimed?(a(),i("p",Je," Contesté")):m("",!0)]),t("div",Xe,[t("p",Ie,c(e.phase_skill.skill.skill_desc),1)]),e.rating_skill_mark>0?(a(),i("div",Pe,[t("p",Re,"Note attribué le "+c(s(H)(s(z)(e.updated_at).format("DD MMMM YYYY à HH:mm"))),1)])):m("",!0)]),t("div",Ze,[t("div",Ke,[C(e.rating_skill_id)?(a(),i("input",{key:1,ref_for:!0,ref:o=>{V.value[e.rating_skill_id]=o},value:e.rating_skill_mark,class:"w-12 bg-white dark:bg-grayish rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",type:"text"},null,8,We)):(a(),i(h,{key:0},[w(c(e.rating_skill_mark),1)],64)),t("p",et," / "+c(e.phase_skill.phase_skill_marking),1),!r.rating.rating_is_validated&&!v.value.has_validated?(a(),i(h,{key:2},[C(e.rating_skill_id)?(a(),i("button",{key:1,class:"rounded-full bg-cyan-600 p-2 text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",type:"button",onClick:o=>F(e.rating_skill_id,e.phase_skill.phase_skill_marking)},[l(s($),{"aria-hidden":"true",class:"h-5 w-5"})],8,st)):(a(),i("button",{key:0,class:"rounded-full bg-cyan-600 p-2 text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",type:"button",onClick:o=>k.value.find(_=>_.id===e.rating_skill_id).edit=!0},[l(s(L),{"aria-hidden":"true",class:"h-5 w-5"})],8,tt)),t("button",{class:"rounded-full bg-red-600 p-2 text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",type:"button",onClick:o=>s(T).delete(n.route("rating-skills.destroy",{rating_skill:e.rating_skill_id}))},[l(s(xe),{"aria-hidden":"true",class:"h-5 w-5"})],8,at)],64)):m("",!0)])])]))),128))])):(a(),b(B,{key:2,message:"Ajouter des compétences à évaluer en utilisant la liste déroulante plus haut.",title:"Vous n'avez pas ajouter de compétences spécifiques à évaluer."}))]),t("div",it,[l(D,{mark:r.rating.general_skills_sum_rating_skill_mark,marking:r.marking.general,title:"Compétences Générales"},null,8,["mark","marking"]),s(N)(r.skills)?(a(),i("ul",lt,[(a(!0),i(h,null,Y(r.skills,e=>(a(),i("li",{key:e.rating_skill_id,class:"flex items-center justify-between gap-x-6 py-5"},[t("div",rt,[t("div",nt,[t("p",ot,c(e.phase_skill.skill.skill_name),1),e.rating_skill_mark_is_claimed?(a(),i("p",dt," Contesté")):m("",!0)]),t("div",ct,[t("p",ut,c(e.phase_skill.skill.skill_desc),1)]),e.rating_skill_mark>0?(a(),i("div",mt,[t("p",_t,"Note attribué le "+c(s(H)(s(z)(e.updated_at).format("DD MMMM YYYY à HH:mm"))),1)])):m("",!0)]),t("div",gt,[t("div",ft,[C(e.rating_skill_id)?(a(),i("input",{key:1,ref_for:!0,ref:o=>{V.value[e.rating_skill_id]=o},value:e.rating_skill_mark,class:"bg-white dark:bg-grayish w-12 rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",type:"text"},null,8,pt)):(a(),i(h,{key:0},[w(c(e.rating_skill_mark),1)],64)),t("p",ht," / "+c(e.phase_skill.phase_skill_marking),1),!r.rating.rating_is_validated&&!v.value.has_validated?(a(),i(h,{key:2},[C(e.rating_skill_id)?(a(),i("button",{key:1,class:"rounded-full bg-cyan-600 p-2 text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",type:"button",onClick:o=>F(e.rating_skill_id,e.phase_skill.phase_skill_marking)},[l(s($),{"aria-hidden":"true",class:"h-5 w-5"})],8,kt)):(a(),i("button",{key:0,class:"rounded-full bg-cyan-600 p-2 text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",type:"button",onClick:o=>k.value.find(_=>_.id===e.rating_skill_id).edit=!0},[l(s(L),{"aria-hidden":"true",class:"h-5 w-5"})],8,vt))],64)):m("",!0)])])]))),128))])):m("",!0)]),t("div",yt,[l(D,{mark:te.value,marking:r.marking.perf,title:"Performances"},null,8,["mark","marking"]),s(N)(r.goals)?(a(),i("ul",xt,[(a(!0),i(h,null,Y(r.goals,e=>(a(),i("li",{key:e.goal_id,class:"flex items-center justify-between gap-x-6 py-5"},[t("div",bt,[t("div",wt,[t("p",Ct,c(e.goal_name),1),t("p",$t,c(e.period.evaluation_period_name),1),e.goal_mark_is_claimed?(a(),i("p",jt," Contesté ")):m("",!0)]),t("div",Vt,[t("p",St,"Taux de réalisation : "+c(e.goal_rate)+" % / Valeur Cible : "+c(e.goal_expected_result)+" %",1)]),e.goal_mark>0?(a(),i("div",Mt,[t("p",Yt,"Note attribué le "+c(s(H)(s(z)(e.updated_at).format("DD MMMM YYYY à HH:mm"))),1)])):m("",!0)]),t("div",Nt,[t("div",Dt,[C("goal_"+e.goal_id)?(a(),i("input",{key:1,ref_for:!0,ref:o=>{V.value["goal_"+e.goal_id]=o},value:e.goal_mark,class:"bg-white dark:bg-grayish w-12 rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",type:"text"},null,8,Et)):(a(),i(h,{key:0},[w(c(e.goal_mark),1)],64)),t("p",Ot," / "+c(e.goal_marking),1),!r.rating.rating_is_validated&&!v.value.has_validated?(a(),i(h,{key:2},[C("goal_"+e.goal_id)?(a(),i("button",{key:1,class:"rounded-full bg-cyan-600 p-2 text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",type:"button",onClick:o=>ie(e.goal_id,e.goal_marking)},[l(s($),{"aria-hidden":"true",class:"h-5 w-5"})],8,At)):(a(),i("button",{key:0,class:"rounded-full bg-cyan-600 p-2 text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",type:"button",onClick:o=>k.value.find(_=>_.id==="goal_"+e.goal_id).edit=!0},[l(s(L),{"aria-hidden":"true",class:"h-5 w-5"})],8,qt))],64)):m("",!0)])])]))),128))])):(a(),b(B,{key:1,link:n.route("agent-goals.create",{agent:r.agent.user_id}),action:"Nouvel Objectif",message:"Les objectifs que vous aurez crée pour lui s'afficherons automatiquement ici.",title:"Vous n'avez pas donner d'objectif à cette agent."},null,8,["link"]))])]),t("div",Tt,[l(D,{title:"Commentaires"}),r.validators?(a(),i("div",Ht,[l(ve,{rating:r.rating,validators:r.validators},null,8,["rating","validators"])])):(a(),b(B,{key:1,message:"Les commentaires des validateurs et de l'évalué s'afficheront ici.",title:"Aucun commentaires pour l'instant. "}))]),t("div",zt,[l(D,{title:"Validation"}),t("div",Bt,[t("form",{onSubmit:A(se,["prevent"])},[t("div",Ut,[t("div",Ft,[Gt,Qt,t("div",Jt,[t("div",Xt,[t("div",It,[l(P,{for:"start_date"}),t("div",Pt,[l(pe,{modelValue:s(p).rating_validator_comment,"onUpdate:modelValue":d[2]||(d[2]=e=>s(p).rating_validator_comment=e),invalid:s(p).errors.rating_validator_comment!==void 0},null,8,["modelValue","invalid"])]),l(Z,{message:s(p).errors.rating_validator_comment},null,8,["message"])])])])]),t("div",Rt,[Zt,Kt,t("div",Wt,[l(s(Ye),{modelValue:s(p).new_validator,"onUpdate:modelValue":d[4]||(d[4]=e=>s(p).new_validator=e)},{default:g(()=>[t("div",es,[l(s(je),{class:y([s(p).errors.new_validator!==void 0?"focus:ring-red-600 ring-red-600":"","w-full rounded-md border-0 bg-white dark:bg-grayish py-1.5 pl-3 pr-12 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 dark:ring-2 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6"]),"display-value":e=>{let o=j.value.filter(_=>_.user_id===e)[0];return o?o.user_matricule+" "+o.user_display_name:r.n1.user_matricule+" "+r.n1.user_display_name},placeholder:"Trouver votre N + 1",onChange:d[3]||(d[3]=e=>{U.keyword=E.value=e.target.value})},null,8,["class","display-value"]),l(s(Ve),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:g(()=>[l(s(K),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),j.value.length>0?(a(),b(s(Se),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:g(()=>[(a(!0),i(h,null,Y(j.value,e=>(a(),b(s(Me),{key:e.user_id,value:e.user_id,as:"template"},{default:g(({active:o,selected:_})=>[t("li",{class:y(["relative cursor-default select-none py-2 pl-3 pr-9",o?"bg-cyan-600  text-white":"text-gray-900 dark:text-white"])},[t("div",ts,[t("span",{class:y(["truncate",_&&"font-semibold"])},c((e==null?void 0:e.user_matricule)+" "+(e==null?void 0:e.user_display_name)),3)]),_?(a(),i("span",{key:0,class:y(["absolute inset-y-0 right-0 flex items-center pr-4",o?"text-white":"text-cyan-600"])},[l(s($),{"aria-hidden":"true",class:"h-5 w-5"})],2)):m("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):m("",!0)])]),_:1},8,["modelValue"])]),t("div",ss,[de(t("input",{id:"remember-n1","onUpdate:modelValue":d[5]||(d[5]=e=>s(p).remember=e),class:"h-4 w-4 rounded border-gray-300 text-cyan-600 focus:ring-cyan-700",name:"remember-n1",type:"checkbox"},null,512),[[ce,s(p).remember]]),as])])]),t("div",is,[l(he),t("div",null,[l(R,{disabled:r.rating.rating_is_validated||v.value.has_validated,processing:s(p).processing,class:"mt-3 sm:ml-3 sm:mt-0 sm:w-auto",type:"submit"},{default:g(()=>[w(" Transmettre ")]),_:1},8,["disabled","processing"]),t("button",{class:y([r.rating.rating_is_validated||v.value.has_validated?"bg-gray-600":"bg-cyan-600  focus-visible:outline-cyan-600 hover:bg-cyan-700    ","inline-flex gap-x-1.5 disabled:opacity-70 rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 mt-3 sm:ml-3 sm:mt-0 sm:w-auto"]),disabled:r.rating.rating_is_validated||v.value.has_validated,onClick:d[6]||(d[6]=A(e=>q.value=!0,["prevent"]))},[w("Valider "),l(s($),{class:"text-white -mr-0.5 h-5 w-5"})],10,ls)])])],40,Lt)])])]),l(ke,{opened:q.value,validation:v.value,onCloseModal:d[7]||(d[7]=e=>q.value=!1)},null,8,["opened","validation"])]),_:1}))}};export{Ms as default};
