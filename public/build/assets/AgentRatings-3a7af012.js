import{_ as b}from"./AuthenticatedLayout-a2654eb8.js";import{b as k,r as w,h as $,w as V,o,d as p,e as a,f as e,u as r,Z as j,a as t,t as l,g as n,l as x,c as h,F as A,j as B,n as N,m as C}from"./app-589b6ab5.js";import{_ as D}from"./Breadcrumbs-65bf6fa9.js";import{g as O,a as E}from"./helper-9d93711f.js";import{_ as F}from"./Datatable-9e7bd542.js";import{r as L,_ as u,a as c,b as M}from"./EmptyState-fbc63e87.js";import{_ as P}from"./SectionTitle-30281add.js";import{_ as T}from"./Separator-adb0342b.js";import{r as z}from"./ChevronDoubleRightIcon-e15481aa.js";import{r as R}from"./EyeIcon-e33ea059.js";import"./logo1637145113-c7398df9.js";const S={class:"px-4 sm:px-6 lg:px-8"},U={class:"sm:flex sm:items-center"},Z={class:"sm:flex-auto"},q={class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},G={class:"mt-2 text-sm text-gray-700 dark:text-white"},H={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},I={class:"sm:flex sm:items-center border-b border-gray-600 pb-5"},J={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},K={key:0,class:"min-w-full divide-y divide-gray-300 dark:divide-black"},Q={class:"bg-gray-50 dark:bg-grayish"},W={class:"divide-y divide-gray-200 dark:divide-black bg-white dark:bg-grayish"},X={class:"flex-shrink-0"},Y={class:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-cyan-600"},ee={class:"text-cyan-700"},te={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ae={class:"flex items-center justify-center"},se={key:1,class:"text-center bg-white dark:bg-grayish text-lg text-gray-600 py-4"},_e={__name:"AgentRatings",props:{agent:{type:Object},ratings:{type:Object}},setup(i){const m=i,v=[{name:"Mes Agents",href:route("agents.index"),current:!1},{name:"Évaluations",href:"#",current:!0}],y=k(()=>O(m.ratings)),g=w(m.ratings.data),f=$({keyword:"",fields:["goal_name","goal_expected_result"]});return V(()=>f.keyword,function(d){d===""?g.value=m.ratings.data:C.post(route("agent-goals.search",{agent:m.agent.user_id}),f).then(_=>g.value=_.data)}),(d,_)=>(o(),p(b,null,{default:a(()=>[e(r(j),{title:"Évaluations - Agents"}),t("div",S,[e(D,{pages:v}),t("div",U,[t("div",Z,[t("h1",q,"Évaluations de "+l(i.agent.user_display_name),1),t("p",G," Liste des Évaluations de "+l(i.agent.user_display_name)+". Matricule : "+l(i.agent.user_matricule),1)]),t("div",H,[e(r(x),{href:d.route("agent-goals.index",{agent:i.agent.user_id}),class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[n(" Objectif "),e(r(z),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),e(T,{title:"Évaluations"}),t("div",I,[e(P,{desc:"Tableau descriptif des évaluations.",title:"Évaluations"}),t("div",J,[e(r(x),{href:d.route("agent-ratings.create",{agent:i.agent.user_id}),class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[n(" Évaluer cet agent "),e(r(L),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),r(E)(i.ratings.data)?(o(),p(F,{key:0,modelValue:f.keyword,"onUpdate:modelValue":_[0]||(_[0]=s=>f.keyword=s),pagination:y.value},{default:a(()=>[g.value.length>0?(o(),h("table",K,[t("thead",Q,[t("tr",null,[e(u,{first:!0},{default:a(()=>[n("Évaluateur")]),_:1}),e(u,null,{default:a(()=>[n("Évalué")]),_:1}),e(u,null,{default:a(()=>[n("Année")]),_:1}),e(u,null,{default:a(()=>[n("Note")]),_:1}),e(u,null,{default:a(()=>[n("Validation")]),_:1}),e(u)])]),t("tbody",W,[(o(!0),h(A,null,B(g.value,s=>(o(),h("tr",{key:s.evaluation_id},[e(c,{first:!0,class:"whitespace-pre-line"},{default:a(()=>[n(l(s.evaluator.user_display_name+" "+s.evaluator.user_matricule),1)]),_:2},1024),e(c,{class:"whitespace-pre-line"},{default:a(()=>[n(l(s.evaluated.user_display_name+" "+s.evaluated.user_matricule),1)]),_:2},1024),e(c,null,{default:a(()=>[n(l(s.phase.phase_year),1)]),_:2},1024),e(c,null,{default:a(()=>[t("span",X,[t("span",Y,[t("span",ee,l(s.rating_mark),1)])])]),_:2},1024),e(c,null,{default:a(()=>[t("span",{class:N([s.rating_is_validated?"bg-green-50 text-green-700 ring-green-600/20 dark:bg-green-600 dark:text-white":"bg-red-50 text-red-700 ring-red-600/20 dark:bg-red-600 dark:text-white","inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"])},l(s.rating_is_validated?"Validé":"En attende"),3)]),_:2},1024),t("td",te,[t("div",ae,[e(r(x),{href:d.route("agent-ratings.show",{agent:i.agent.user_id,agent_rating:s.rating_id}),class:"group flex items-center px-4 py-2 text-sm"},{default:a(()=>[e(r(R),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-cyan-600"})]),_:2},1032,["href"])])])]))),128))])])):(o(),h("div",se,"Aucun élément trouvé."))]),_:1},8,["modelValue","pagination"])):(o(),p(M,{key:1,link:d.route("agent-ratings.create",{agent:i.agent.user_id}),action:"Évaluer cet agent",message:"Créer une nouvelle évaluation",title:"Pas d'évaluation"},null,8,["link"]))])]),_:1}))}};export{_e as default};
