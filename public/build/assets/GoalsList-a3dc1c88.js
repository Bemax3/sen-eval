import{b as N,r as O,h as T,T as F,w as C,o as i,d as y,e as a,f as e,u as l,Z as L,a as t,c as d,i as S,g as r,t as n,p as U,n as m,k as v,F as w,j as V,l as Y,O as z,m as A}from"./app-589b6ab5.js";import{_ as P}from"./AuthenticatedLayout-a2654eb8.js";import{_ as H}from"./Breadcrumbs-65bf6fa9.js";import{g as I,a as q,c as E,m as G}from"./helper-9d93711f.js";import{_ as Z}from"./Datatable-9e7bd542.js";import{_ as o,a as c,b as J}from"./EmptyState-fbc63e87.js";import{_ as K}from"./InputLabel-abf86e56.js";import{_ as Q}from"./SubmitButton-c6a61157.js";import{r as R}from"./ChevronUpDownIcon-b285a6e4.js";import{r as j}from"./CheckIcon-c0a2e6bc.js";import{r as W}from"./EyeIcon-e33ea059.js";import{N as X,H as ee,U as $,B as te}from"./listbox-8a5adbf0.js";import"./logo1637145113-c7398df9.js";import"./use-controllable-17c4dbac.js";const ae={class:"px-4 sm:px-6 lg:px-8"},se=t("div",{class:"sm:flex sm:items-center"},[t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},"Mes Objectifs"),t("p",{class:"mt-2 text-sm text-gray-700 dark:text-white"}," Liste de mes objectifs ")])],-1),le={key:0,class:"mt-8 bg-white dark:bg-grayish shadow sm:rounded-lg"},re={class:"px-4 py-5 sm:p-6"},ie=t("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"},"Filtres",-1),ne=t("div",{class:"mt-2 max-w-xl text-sm text-gray-500 dark:text-gray-100"},[t("p",null,"Filtrer les données en fonction de l'année et de la direction")],-1),oe=["onSubmit"],de={class:"w-full sm:max-w-xl"},ce={class:"mt-2"},ue={class:"relative mt-2"},me={class:"block truncate"},_e={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},pe={class:"mt-8"},fe={key:0,class:"min-w-full divide-y divide-gray-300 dark:divide-black"},he={class:"bg-gray-50 dark:bg-grayish"},ge={class:"divide-y divide-gray-200 dark:divide-black bg-white dark:bg-grayish"},xe={class:"flex-shrink-0"},ye={class:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-cyan-600"},be={class:"text-cyan-700"},ve={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ke={class:"flex items-center justify-center"},we={key:1,class:"text-center bg-white dark:bg-grayish text-lg text-gray-600 py-4"},Ye={__name:"GoalsList",props:{goals:{type:Object},phases:{},phase_id:{}},setup(f){const h=f,M=[{name:"Mes Objectifs",href:"#",current:!0}],B=N(()=>I(h.goals)),p=O(h.goals.data),g=T({keyword:"",fields:["goal_name","goal_expected_result"]}),x=F({phase_id:parseInt(h.phase_id)||-1}),D=()=>{z.get(route("goals.index",{phase_id:x.phase_id}),{},{preserveScroll:!0})};return C(()=>g.keyword,function(b){b===""?p.value=h.goals.data:A.post(route("goals.search"),g).then(_=>p.value=_.data)}),(b,_)=>(i(),y(P,null,{default:a(()=>[e(l(L),{title:"Mes Objectifs"}),t("div",ae,[e(H,{pages:M}),se,p.value.length>0?(i(),d("div",le,[t("div",re,[ie,ne,t("form",{class:"mt-5 sm:flex sm:items-center gap-2",onSubmit:S(D,["prevent"])},[t("div",de,[e(K,null,{default:a(()=>[r("Année d'évaluation")]),_:1}),t("div",ce,[e(l(te),{modelValue:l(x).phase_id,"onUpdate:modelValue":_[0]||(_[0]=s=>l(x).phase_id=s),as:"div"},{default:a(()=>[t("div",ue,[e(l(X),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-grayish py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:a(()=>{var s;return[t("span",me,n(((s=f.phases.filter(u=>u.phase_id===l(x).phase_id)[0])==null?void 0:s.phase_year)||"Toute confondues"),1),t("span",_e,[e(l(R),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]}),_:1}),e(U,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:a(()=>[e(l(ee),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:a(()=>[e(l($),{value:-1,as:"template"},{default:a(({active:s,selected:u})=>[t("li",{class:m([s?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[t("span",{class:m([u?"font-semibold":"font-normal","block truncate"])},"Toute confondues",2),u?(i(),d("span",{key:0,class:m([s?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[e(l(j),{"aria-hidden":"true",class:"h-5 w-5"})],2)):v("",!0)],2)]),_:1}),(i(!0),d(w,null,V(f.phases,s=>(i(),y(l($),{key:s.phase_id,value:s.phase_id,as:"template"},{default:a(({active:u,selected:k})=>[t("li",{class:m([u?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[t("span",{class:m([k?"font-semibold":"font-normal","block truncate"])},n(s.phase_year),3),k?(i(),d("span",{key:0,class:m([u?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[e(l(j),{"aria-hidden":"true",class:"h-5 w-5"})],2)):v("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),t("div",pe,[e(Q,{class:"sm:ml-3 sm:mt-0 sm:w-auto",type:"submit"},{default:a(()=>[r("Filtrer")]),_:1})])],40,oe)])])):v("",!0),l(q)(f.goals.data)?(i(),y(Z,{key:1,modelValue:g.keyword,"onUpdate:modelValue":_[1]||(_[1]=s=>g.keyword=s),pagination:B.value},{default:a(()=>[p.value.length>0?(i(),d("table",fe,[t("thead",he,[t("tr",null,[e(o,{first:!0},{default:a(()=>[r("Libelle")]),_:1}),e(o,null,{default:a(()=>[r("Valeur Cible")]),_:1}),e(o,null,{default:a(()=>[r("Disponibilité des Moyens")]),_:1}),e(o,null,{default:a(()=>[r("Échéance")]),_:1}),e(o,null,{default:a(()=>[r("Taux de réalisation")]),_:1}),e(o,null,{default:a(()=>[r("Année d'évaluation")]),_:1}),e(o,null,{default:a(()=>[r("Période")]),_:1}),e(o,null,{default:a(()=>[r("Barème")]),_:1}),e(o)])]),t("tbody",ge,[(i(!0),d(w,null,V(p.value,s=>(i(),d("tr",{key:s.goal_id},[e(c,{first:!0,class:"whitespace-pre-line"},{default:a(()=>[r(n(s.goal_name),1)]),_:2},1024),e(c,{class:"whitespace-pre-line"},{default:a(()=>[r(n(s.goal_expected_result)+" %",1)]),_:2},1024),e(c,null,{default:a(()=>[t("span",{class:m([s.goal_means_available?"bg-green-50 text-green-700 ring-green-600/20 dark:bg-green-600 dark:text-white":"bg-red-50 text-red-700 ring-red-600/20 dark:bg-red-600 dark:text-white","inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset"])},n(s.goal_means_available?"Disponible":"Indisponible"),3)]),_:2},1024),e(c,null,{default:a(()=>[r(n(l(E)(l(G)(s.goal_expected_date).format("DD MMMM YYYY"))),1)]),_:2},1024),e(c,{class:"whitespace-break-spaces"},{default:a(()=>[r(n(s.goal_rate)+" % ",1)]),_:2},1024),e(c,null,{default:a(()=>[r(n(s.phase.phase_year),1)]),_:2},1024),e(c,null,{default:a(()=>[r(n(s.period.evaluation_period_name),1)]),_:2},1024),e(c,null,{default:a(()=>[t("span",xe,[t("span",ye,[t("span",be,n(s.goal_marking),1)])])]),_:2},1024),t("td",ve,[t("div",ke,[e(l(Y),{href:b.route("goals.edit",{goal:s.goal_id}),class:"group flex items-center px-4 py-2 text-sm"},{default:a(()=>[e(l(W),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-cyan-600"})]),_:2},1032,["href"])])])]))),128))])])):(i(),d("div",we," Aucun élément trouvé."))]),_:1},8,["modelValue","pagination"])):(i(),y(J,{key:2,message:"Votre supérieur hiérarchique ne vous a pas encore proposer d'objectifs",title:"Pas d'objectifs"}))])]),_:1}))}};export{Ye as default};
