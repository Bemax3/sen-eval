import{_ as V}from"./AuthenticatedLayout-a2654eb8.js";import{b as j,r as b,h as B,w as k,o as u,d as x,e as a,f as e,u as t,Z as O,a as i,t as m,g as o,l as h,c as _,F,j as S,m as A,O as w}from"./app-589b6ab5.js";import{_ as T}from"./Breadcrumbs-65bf6fa9.js";import{a as P,g as $,c as D,m as M}from"./helper-9d93711f.js";import{r as q,_ as p,a as v,b as z}from"./EmptyState-fbc63e87.js";import{_ as E}from"./Datatable-9e7bd542.js";import{_ as I}from"./Separator-adb0342b.js";import{_ as L}from"./SectionTitle-30281add.js";import{_ as U}from"./DeleteModal-34227f27.js";import{r as Z}from"./PencilSquareIcon-b18d63ca.js";import{r as G}from"./TrashIcon-7c87b86a.js";import"./logo1637145113-c7398df9.js";import"./ExclamationTriangleIcon-6343b611.js";const H={class:"px-4 sm:px-6 lg:px-8"},J={class:"sm:flex sm:items-center"},K={class:"sm:flex-auto"},Q={class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},R=i("p",{class:"mt-2 text-sm text-gray-700 dark:text-white"}," Details et paramètres de l'évaluation. ",-1),W={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},X={class:"sm:flex sm:items-center"},ee={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},te={key:0,class:"min-w-full divide-y divide-gray-300 dark:divide-black"},se={class:"bg-gray-50 dark:bg-grayish"},ae={class:"divide-y divide-gray-200 dark:divide-black bg-white dark:bg-grayish"},ie={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},oe={class:"flex items-center justify-center"},re=["onClick"],le={key:1,class:"text-center bg-white dark:bg-grayish text-lg text-gray-600 py-4"},ke={__name:"PhasePeriods",props:{phase:{type:Object},periods:{type:Object}},setup(n){const l=n,Y=[{name:"Phases d'évaluation",href:route("phases.index"),current:!1},{name:"Périodes d'évaluation",href:"#",current:!0}];j(()=>$(l.periods));const c=b(l.periods.data),g=b(!1),f=B({keyword:"",fields:["evaluation_period_start","evaluation_period_end"],phase_id:l.phase.phase_id});let y=P(l.periods.data)?l.periods.data[0].evaluation_period_id:null;const C=s=>{y=s,g.value=!0};return k(()=>f.keyword,function(s){s===""?c.value=l.periods.data:A.post(route("periods.search"),f).then(d=>{c.value=d.data}).catch(d=>console.log(d))}),k(()=>l.periods,function(s){c.value=s.data,!c.value.length>0&&(s.prev_page_url?w.get(s.prev_page_url):w.get(s.first_page_url))}),(s,d)=>(u(),x(V,null,{default:a(()=>[e(t(O),{title:"Paramètre de Phase"}),i("div",H,[e(T,{pages:Y}),i("div",J,[i("div",K,[i("h1",Q,"Paramètres "+m(n.phase.phase_name),1),R]),i("div",W,[e(t(h),{href:s.route("phaseSkills.show",{phaseSkill:n.phase.phase_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[o(" Compétences ")]),_:1},8,["href"]),e(t(h),{href:s.route("periods.show",{period:n.phase.phase_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[o(" Périodes d'évaluation ")]),_:1},8,["href"])])]),e(I,{title:"Périodes"}),i("div",X,[e(L,{desc:"Cette liste représente les périodes ou les évaluateurs pourront soumettre les évaluations de leur agents.",title:"Période d'évaluation"}),i("div",ee,[e(t(h),{href:s.route("periods.create",{phase:n.phase.phase_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[o(" Nouvelle Période "),e(t(q),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),t(P)(l.periods.data)?(u(),x(E,{key:0,modelValue:f.keyword,"onUpdate:modelValue":d[0]||(d[0]=r=>f.keyword=r),pagination:t($)(n.periods)},{default:a(()=>[c.value.length>0?(u(),_("table",te,[i("thead",se,[i("tr",null,[e(p,{first:!0},{default:a(()=>[o("Identifiant")]),_:1}),e(p,null,{default:a(()=>[o("Nom")]),_:1}),e(p,null,{default:a(()=>[o("Date de début")]),_:1}),e(p,null,{default:a(()=>[o("Date de Fin")]),_:1}),e(p)])]),i("tbody",ae,[(u(!0),_(F,null,S(c.value,(r,N)=>(u(),_("tr",{key:r.evaluation_period_id},[e(v,{first:!0},{default:a(()=>[o(m(N+1),1)]),_:2},1024),e(v,null,{default:a(()=>[o(m(r.evaluation_period_name),1)]),_:2},1024),e(v,null,{default:a(()=>[o(m(t(D)(t(M)(r.evaluation_period_start).format("DD MMMM YYYY"))),1)]),_:2},1024),e(v,null,{default:a(()=>[o(m(t(D)(t(M)(r.evaluation_period_end).format("DD MMMM YYYY"))),1)]),_:2},1024),i("td",ie,[i("div",oe,[e(t(h),{href:s.route("periods.edit",{period:r.evaluation_period_id}),class:"group flex items-center px-4 py-2 text-sm"},{default:a(()=>[e(t(Z),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-cyan-600"})]),_:2},1032,["href"]),i("a",{class:"group flex items-center px-4 py-2 text-sm",href:"#",onClick:de=>C(r.evaluation_period_id)},[e(t(G),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-red-600"})],8,re)])])]))),128))])])):(u(),_("div",le," Aucun élément trouvé."))]),_:1},8,["modelValue","pagination"])):(u(),x(z,{key:1,link:s.route("periods.create",{phase:n.phase.phase_id}),action:"Nouvelle Période",message:"Ajouter des périodes en cliquant sur ce bouton.",title:"Pas de périodes d'évaluation crée pour cette phase."},null,8,["link"])),e(U,{id:t(y),opened:g.value,link:"periods.destroy",name:"period",onCloseModal:d[1]||(d[1]=r=>g.value=!1)},null,8,["id","opened"])])]),_:1}))}};export{ke as default};
