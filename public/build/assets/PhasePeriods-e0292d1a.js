import{_ as V}from"./AuthenticatedLayout-a74cb3f1.js";import{b as j,r as b,h as B,w,o as u,d as x,e as a,f as e,u as t,Z as O,a as o,t as m,g as i,m as _,c as h,F,j as S,l as A,O as k}from"./app-2a089cf5.js";import{_ as T}from"./Breadcrumbs-6398e3e4.js";import{a as P,g as $,c as D,m as M}from"./helper-18252d35.js";import{r as q,_ as p,a as z,b as v}from"./EmptyState-732ad0f2.js";import{_ as E}from"./Datatable-a92b7c7f.js";import{_ as I}from"./Separator-59f6b2cc.js";import{_ as L}from"./SectionTitle-0dc7701a.js";import{_ as U}from"./DeleteModal-c2a3b491.js";import{r as Z}from"./PencilSquareIcon-62c36d40.js";import{r as G}from"./TrashIcon-18c9b9b2.js";import"./logo1637145113-c7398df9.js";import"./ExclamationTriangleIcon-42547667.js";const H={class:"px-4 sm:px-6 lg:px-8"},J={class:"sm:flex sm:items-center"},K={class:"sm:flex-auto"},Q={class:"text-2xl font-semibold leading-6 text-gray-900"},R=o("p",{class:"mt-2 text-sm text-gray-700"}," Details et paramètres de l'évaluation. ",-1),W={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},X={class:"sm:flex sm:items-center"},ee={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},te={key:0,class:"min-w-full divide-y divide-gray-300"},se={class:"bg-gray-50"},ae={class:"divide-y divide-gray-200 bg-white"},oe={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ie={class:"flex items-center justify-center"},le=["onClick"],re={key:1,class:"text-center bg-white text-lg text-gray-600 py-4"},we={__name:"PhasePeriods",props:{phase:{type:Object},periods:{type:Object}},setup(d){const r=d,Y=[{name:"Phases d'évaluation",href:route("phases.index"),current:!1},{name:"Périodes d'évaluation",href:"#",current:!0}];j(()=>$(r.periods));const c=b(r.periods.data),g=b(!1),f=B({keyword:"",fields:["evaluation_period_start","evaluation_period_end"],phase_id:r.phase.phase_id});let y=P(r.periods.data)?r.periods.data[0].evaluation_period_id:null;const C=s=>{y=s,g.value=!0};return w(()=>f.keyword,function(s){s===""?c.value=r.periods.data:A.post(route("periods.search"),f).then(n=>{c.value=n.data}).catch(n=>console.log(n))}),w(()=>r.periods,function(s){c.value=s.data,!c.value.length>0&&(s.prev_page_url?k.get(s.prev_page_url):k.get(s.first_page_url))}),(s,n)=>(u(),x(V,null,{default:a(()=>[e(t(O),{title:"Paramètre de Phase"}),o("div",H,[e(T,{pages:Y}),o("div",J,[o("div",K,[o("h1",Q,"Paramètres "+m(d.phase.phase_name),1),R]),o("div",W,[e(t(_),{href:s.route("phaseSkills.show",{phaseSkill:d.phase.phase_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[i(" Compétences ")]),_:1},8,["href"]),e(t(_),{href:s.route("periods.show",{period:d.phase.phase_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[i(" Périodes d'évaluation ")]),_:1},8,["href"])])]),e(I,{title:"Périodes"}),o("div",X,[e(L,{desc:"Cette liste représente les périodes ou les évaluateurs pourront soumettre les évaluations de leur agents.",title:"Période d'évaluation"}),o("div",ee,[e(t(_),{href:s.route("periods.create",{phase:d.phase.phase_id}),as:"button",class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:a(()=>[i(" Nouvelle Période "),e(t(q),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),t(P)(r.periods.data)?(u(),x(E,{key:0,modelValue:f.keyword,"onUpdate:modelValue":n[0]||(n[0]=l=>f.keyword=l),pagination:t($)(d.periods)},{default:a(()=>[c.value.length>0?(u(),h("table",te,[o("thead",se,[o("tr",null,[e(p,{first:!0},{default:a(()=>[i("Identifiant")]),_:1}),e(p,null,{default:a(()=>[i("Nom")]),_:1}),e(p,null,{default:a(()=>[i("Date de début")]),_:1}),e(p,null,{default:a(()=>[i("Date de Fin")]),_:1}),e(p)])]),o("tbody",ae,[(u(!0),h(F,null,S(c.value,(l,N)=>(u(),h("tr",{key:l.evaluation_period_id},[e(v,{first:!0},{default:a(()=>[i(m(N+1),1)]),_:2},1024),e(v,null,{default:a(()=>[i(m(l.evaluation_period_name),1)]),_:2},1024),e(v,null,{default:a(()=>[i(m(t(D)(t(M)(l.evaluation_period_start).format("DD MMMM YYYY"))),1)]),_:2},1024),e(v,null,{default:a(()=>[i(m(t(D)(t(M)(l.evaluation_period_end).format("DD MMMM YYYY"))),1)]),_:2},1024),o("td",oe,[o("div",ie,[e(t(_),{href:s.route("periods.edit",{period:l.evaluation_period_id}),class:"group flex items-center px-4 py-2 text-sm"},{default:a(()=>[e(t(Z),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-cyan-600"})]),_:2},1032,["href"]),o("a",{class:"group flex items-center px-4 py-2 text-sm",href:"#",onClick:ne=>C(l.evaluation_period_id)},[e(t(G),{"aria-hidden":"true",class:"mr-3 h-5 w-5 text-gray-400 group-hover:text-red-600"})],8,le)])])]))),128))])])):(u(),h("div",re," Aucun élément trouvé."))]),_:1},8,["modelValue","pagination"])):(u(),x(z,{key:1,link:s.route("periods.create",{phase:d.phase.phase_id}),action:"Nouvelle Période",message:"Ajouter des périodes en cliquant sur ce bouton.",title:"Pas de périodes d'évaluation crée pour cette phase."},null,8,["link"])),e(U,{id:t(y),opened:g.value,link:"periods.destroy",name:"period",onCloseModal:n[1]||(n[1]=l=>g.value=!1)},null,8,["id","opened"])])]),_:1}))}};export{we as default};
