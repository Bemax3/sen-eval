import{b as X,T as B,r as C,h as O,w as R,o as d,d as x,e as o,Q as Z,f as a,u as s,Z as K,a as e,t as w,i as ee,g as U,c as h,j as M,n as _,k as y,F as Y,p as se}from"./app-c51809d2.js";import{_ as te}from"./AuthenticatedLayout-b0b54744.js";import{_ as ae}from"./Breadcrumbs-6cd41b84.js";import{_ as g}from"./TextInput-b3209f14.js";import{_ as re}from"./SubmitButton-42dd88ba.js";import{i as le,c as q,m as A}from"./helper-f88ff6de.js";import{_ as ie}from"./InputLabel-be02b7d5.js";import{r as m}from"./LockClosedIcon-d4d1954c.js";import{r as L}from"./ChevronUpDownIcon-f3f22d97.js";import{r as P}from"./CheckIcon-37fba7ec.js";import{W as E,Q as G,G as S,X as j,Y as H,J as I}from"./combobox-c6ddbcc4.js";import{N as oe,H as ne,U as de,B as ue}from"./listbox-91d0ad42.js";import"./logo1637145113-c7398df9.js";import"./use-controllable-abfeee94.js";const me={class:"px-4 sm:px-6 lg:px-8"},ce={class:"sm:flex sm:items-center"},_e={class:"sm:flex-auto"},ge={class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},he=e("p",{class:"mt-2 text-sm text-gray-700 dark:text-white"}," Informations personnelles et administratives de l'agent. ",-1),pe={class:"mt-8 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg bg-white dark:bg-grayish"},fe={class:"grid max-w-full grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8"},xe=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Informations Personnelles"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Vous ne pouvez pas modifier ces informations.")],-1),ye={class:"md:col-span-2"},ve={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},be=e("div",{class:"col-span-full flex items-center gap-x-8"},[e("img",{alt:"",class:"h-24 w-24 flex-none bg-cyan-600 dark:bg-black object-cover"})],-1),we={class:"sm:col-span-3"},ke=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"Prénom",-1),Ve={class:"relative shadow-sm rounded-md mt-2"},Ce={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ue={class:"sm:col-span-3"},Ne=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"Nom",-1),De={class:"relative shadow-sm rounded-md mt-2"},Me={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ye={class:"col-span-full"},Le=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"email"},"Email",-1),Pe={class:"relative shadow-sm rounded-md mt-2"},Fe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},$e={class:"grid max-w-full grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2 dark:border-gray-600"},ze=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Informations Administratives"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Changer le supérieur hiérarchique de l'agent ou son organisation.")],-1),Be=["onSubmit"],Oe={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},Re={class:"col-span-full"},qe={class:"relative mt-2"},Ae={class:"flex"},Ee={class:"col-span-full"},Ge=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"confirm-password"},"Poste",-1),Se={class:"relative shadow-sm rounded-md mt-2"},je={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},He={class:"col-span-full"},Ie=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"confirm-password"},"College",-1),Qe={class:"relative shadow-sm rounded-md mt-2"},Te={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Je={class:"sm:col-span-3"},We=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"Matricule",-1),Xe={class:"relative shadow-sm rounded-md mt-2"},Ze={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ke={class:"sm:col-span-3"},es=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"Centre de Responsabilité",-1),ss={class:"relative shadow-sm rounded-md mt-2"},ts={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},as={class:"sm:col-span-3"},rs=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"GF",-1),ls={class:"relative shadow-sm rounded-md mt-2"},is={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},os={class:"sm:col-span-3"},ns=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"NR",-1),ds={class:"relative shadow-sm rounded-md mt-2"},us={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ms={class:"sm:col-span-3"},cs=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"Date Promotion GF",-1),_s={class:"relative shadow-sm rounded-md mt-2"},gs=["value"],hs={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ps={class:"sm:col-span-3"},fs=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"Date Promotion NR",-1),xs={class:"relative shadow-sm rounded-md mt-2"},ys=["value"],vs={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},bs={key:0,class:"sm:col-span-4"},ws={class:"mt-2"},ks={class:"relative mt-2"},Vs={class:"block truncate"},Cs={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Us={class:"col-span-full"},Ns={class:"relative mt-2"},Ds={class:"flex"},Ms={class:"mt-8 flex"},Hs={__name:"Profile",props:{user:{type:Object},n1s:{type:Array},orgs:{type:Array},roles:{type:Array}},setup(p){const l=p,F=X(()=>Z().props.auth.user.role_id===1),Q=[{name:"Profil",href:"#",current:!0}],c=B(F?{n1_id:l.user.n1?l.user.n1.user_id:-1,org_id:l.user.org?l.user.org.org_id:null,role_id:l.user.role.role_id}:{n1_id:l.user.n1?l.user.n1.user_id:-1,org_id:l.user.org?l.user.org.org_id:null}),N=l.orgs,k=C(""),v=C(N),$=O({keyword:"",fields:["org_name","org_responsibility_center"]}),D=l.n1s,V=C(""),b=C(D),z=O({keyword:"",fields:["user_matricule","user_display_name"]}),i=(()=>B(le(l.user)?{}:{user_first_name:l.user.user_first_name||"",user_last_name:l.user.user_last_name||"",email:l.user.email||"",org_name:l.user.org?l.user.org.org_name:"",user_title:l.user.user_title||"",user_matricule:l.user.user_matricule||"",group_name:l.user.group?l.user.group.group_name:"",user_responsibility_center:l.user.user_responsibility_center||"",user_gf:l.user.user_gf||"",user_nr:l.user.user_nr||"",user_gf_prom_date:l.user.user_gf_prom_date||"",user_nr_prom_date:l.user.user_nr_prom_date||""}))(),T=()=>c.put(route("profile.update",{profile:l.user.user_id})),J=()=>axios.post(route("users.search"),z),W=()=>axios.post(route("orgs.search"),$);return R(()=>V.value,function(f){let r=f===""?D:D.filter(t=>t.user_matricule.toLowerCase().includes(V.value.toLowerCase())||t.user_display_name.toLowerCase().includes(V.value.toLowerCase()));r.length>0?b.value=r:f.length>=3&&J().then(t=>b.value=t.data)}),R(()=>k.value,function(f){let r=f===""?N:N.filter(t=>t.org_name.toLowerCase().includes(k.value.toLowerCase())||t.org_responsibility_center.toLowerCase().includes(k.value.toLowerCase()));r.length>0?v.value=r:f.length>=3&&W().then(t=>v.value=t.data)}),(f,r)=>(d(),x(te,null,{default:o(()=>[a(s(K),{title:"Profil"}),e("div",me,[a(ae,{pages:Q}),e("div",ce,[e("div",_e,[e("h1",ge,"Profil de "+w(p.user.user_display_name),1),he])]),e("div",pe,[e("div",fe,[xe,e("form",ye,[e("div",ve,[be,e("div",we,[ke,e("div",Ve,[a(g,{modelValue:s(i).user_first_name,"onUpdate:modelValue":r[0]||(r[0]=t=>s(i).user_first_name=t),disabled:!0},null,8,["modelValue"]),e("div",Ce,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ue,[Ne,e("div",De,[a(g,{modelValue:s(i).user_last_name,"onUpdate:modelValue":r[1]||(r[1]=t=>s(i).user_last_name=t),disabled:!0},null,8,["modelValue"]),e("div",Me,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ye,[Le,e("div",Pe,[a(g,{modelValue:s(i).email,"onUpdate:modelValue":r[2]||(r[2]=t=>s(i).email=t),disabled:!0},null,8,["modelValue"]),e("div",Fe,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])])])])]),e("div",$e,[ze,e("form",{class:"md:col-span-2",onSubmit:ee(T,["prevent"])},[e("div",Oe,[e("div",Re,[a(s(I),{modelValue:s(c).org_id,"onUpdate:modelValue":r[4]||(r[4]=t=>s(c).org_id=t),as:"div"},{default:o(()=>[a(s(E),{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white"},{default:o(()=>[U("Organisation")]),_:1}),e("div",qe,[a(s(G),{"display-value":t=>{let n=v.value.filter(u=>u.org_id===t)[0]||p.user.org;return n?n.org_name+" "+n.org_responsibility_center:"Non défini"},class:"w-full rounded-md border-0 bg-white dark:bg-grayish py-1.5 pl-3 pr-12 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 dark:ring-2 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",onChange:r[3]||(r[3]=t=>{$.keyword=k.value=t.target.value})},null,8,["display-value"]),a(s(S),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:o(()=>[a(s(L),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),v.value.length>0?(d(),x(s(j),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:o(()=>[(d(!0),h(Y,null,M(v.value,t=>(d(),x(s(H),{key:t.org_id,value:t.org_id,as:"template"},{default:o(({active:n,selected:u})=>[e("li",{class:_(["relative cursor-default select-none py-2 pl-3 pr-9",n?"bg-cyan-600  text-white":"text-gray-900 dark:text-white"])},[e("div",Ae,[e("span",{class:_(["truncate",u&&"font-semibold"])},w((t==null?void 0:t.org_name)+" --> "+(t==null?void 0:t.org_responsibility_center)),3)]),u?(d(),h("span",{key:0,class:_(["absolute inset-y-0 right-0 flex items-center pr-4",n?"text-white":"text-cyan-600"])},[a(s(P),{"aria-hidden":"true",class:"h-5 w-5"})],2)):y("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):y("",!0)])]),_:1},8,["modelValue"])]),e("div",Ee,[Ge,e("div",Se,[a(g,{modelValue:s(i).user_title,"onUpdate:modelValue":r[5]||(r[5]=t=>s(i).user_title=t),disabled:!0},null,8,["modelValue"]),e("div",je,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",He,[Ie,e("div",Qe,[a(g,{modelValue:s(i).group_name,"onUpdate:modelValue":r[6]||(r[6]=t=>s(i).group_name=t),disabled:!0},null,8,["modelValue"]),e("div",Te,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Je,[We,e("div",Xe,[a(g,{modelValue:s(i).user_matricule,"onUpdate:modelValue":r[7]||(r[7]=t=>s(i).user_matricule=t),disabled:!0},null,8,["modelValue"]),e("div",Ze,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ke,[es,e("div",ss,[a(g,{modelValue:s(i).user_responsibility_center,"onUpdate:modelValue":r[8]||(r[8]=t=>s(i).user_responsibility_center=t),disabled:!0},null,8,["modelValue"]),e("div",ts,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",as,[rs,e("div",ls,[a(g,{modelValue:s(i).user_gf,"onUpdate:modelValue":r[9]||(r[9]=t=>s(i).user_gf=t),disabled:!0},null,8,["modelValue"]),e("div",is,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",os,[ns,e("div",ds,[a(g,{modelValue:s(i).user_nr,"onUpdate:modelValue":r[10]||(r[10]=t=>s(i).user_nr=t),disabled:!0},null,8,["modelValue"]),e("div",us,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ms,[cs,e("div",_s,[e("input",{disabled:!0,value:s(q)(s(A)(s(i).user_gf_prom_date).format("DD MMMM YYYY")),class:"bg-white dark:bg-grayish block w-full rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 dark:ring-2 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,gs),e("div",hs,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ps,[fs,e("div",xs,[e("input",{disabled:!0,value:s(q)(s(A)(s(i).user_nr_prom_date).format("DD MMMM YYYY")),class:"bg-white dark:bg-grayish block w-full rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 dark:ring-2 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,ys),e("div",vs,[a(s(m),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),F.value?(d(),h("div",bs,[a(ie,null,{default:o(()=>[U("Role")]),_:1}),e("div",ws,[a(s(ue),{modelValue:s(c).role_id,"onUpdate:modelValue":r[11]||(r[11]=t=>s(c).role_id=t),as:"div"},{default:o(()=>[e("div",ks,[a(s(oe),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-grayish py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:o(()=>[e("span",Vs,w(p.roles.filter(t=>t.role_id===s(c).role_id)[0].role_name),1),e("span",Cs,[a(s(L),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),a(se,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:o(()=>[a(s(ne),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:o(()=>[(d(!0),h(Y,null,M(p.roles,t=>(d(),x(s(de),{key:t.role_id,value:t.role_id,as:"template"},{default:o(({active:n,selected:u})=>[e("li",{class:_([n?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:_([u?"font-semibold":"font-normal","block truncate"])},w(t.role_name),3),u?(d(),h("span",{key:0,class:_([n?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[a(s(P),{"aria-hidden":"true",class:"h-5 w-5"})],2)):y("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])])):y("",!0),e("div",Us,[a(s(I),{modelValue:s(c).n1_id,"onUpdate:modelValue":r[13]||(r[13]=t=>s(c).n1_id=t),as:"div"},{default:o(()=>[a(s(E),{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white"},{default:o(()=>[U("Supérieure Hiérarchique (N + 1) ")]),_:1}),e("div",Ns,[a(s(G),{"display-value":t=>{let n=b.value.filter(u=>u.user_id===t)[0]||p.user.n1;return n?n.user_matricule+" "+n.user_display_name:"Non défini"},class:"w-full rounded-md border-0 bg-white dark:bg-grayish py-1.5 pl-3 pr-12 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 dark:ring-2 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",onChange:r[12]||(r[12]=t=>{z.keyword=V.value=t.target.value})},null,8,["display-value"]),a(s(S),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:o(()=>[a(s(L),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),b.value.length>0?(d(),x(s(j),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:o(()=>[(d(!0),h(Y,null,M(b.value,t=>(d(),x(s(H),{key:t.user_id,value:t.user_id,as:"template"},{default:o(({active:n,selected:u})=>[e("li",{class:_(["relative cursor-default select-none py-2 pl-3 pr-9",n?"bg-cyan-600  text-white":"text-gray-900 dark:text-white"])},[e("div",Ds,[e("span",{class:_(["truncate",u&&"font-semibold"])},w((t==null?void 0:t.user_matricule)+" "+(t==null?void 0:t.user_display_name)),3)]),u?(d(),h("span",{key:0,class:_(["absolute inset-y-0 right-0 flex items-center pr-4",n?"text-white":"text-cyan-600"])},[a(s(P),{"aria-hidden":"true",class:"h-5 w-5"})],2)):y("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):y("",!0)])]),_:1},8,["modelValue"])])]),e("div",Ms,[a(re,{processing:s(c).processing},{default:o(()=>[U("Enregistrer")]),_:1},8,["processing"])])],40,Be)])])])]),_:1}))}};export{Hs as default};
