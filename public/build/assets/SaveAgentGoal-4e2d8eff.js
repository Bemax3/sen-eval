import{r as D,w as T,o as c,e as V,u as a,f as i,T as E,g as s,Z as G,a as e,t as y,k as r,m as A,h as H,p as U,c as b,i as M,F as q,j as $,n as g}from"./app-24ae2e28.js";import{m as R,p as Q,i as p,_ as Z,h as B}from"./AuthenticatedLayout-29feb6d0.js";import{_ as I}from"./Breadcrumbs-ee1b7b87.js";import{_ as J}from"./Separator-0bf6f5e9.js";import{_ as K}from"./SectionTitle-c85c8c45.js";import{_ as W}from"./FormIndications-1fbe2c3e.js";import{_ as m}from"./InputLabel-ed4dee0a.js";import{_ as X}from"./SubmitButton-29472fd1.js";import{_ as f}from"./InputError-a796d690.js";import{_ as ee}from"./TextInput-9222fa1d.js";import{_ as N}from"./TextArea-e11cbc93.js";import{_ as ae}from"./Switch-6aeac869.js";import{G as se}from"./vue-tailwind-datepicker-abc5335a.js";import{_ as S}from"./NumberInput-60295f1f.js";import{_ as te}from"./GoalActivity-26a9db69.js";import{r as le}from"./ChevronDoubleRightIcon-2f5ae5e6.js";import{r as Y}from"./ChevronUpDownIcon-fe3aa882.js";import{r as O}from"./CheckIcon-d5137f3b.js";import{N as C,H as F,B as L,U as P}from"./listbox-4dcdf268.js";import"./logo1637145113-11387d37.js";import"./switch-302e976e.js";import"./use-controllable-cd0bea6c.js";const oe={__name:"DatePicker",props:{modelValue:{type:Date,required:!0},invalid:{type:Boolean}},emits:["update:modelValue"],setup(d,{emit:o}){const k=d,_=D([]);_.value=[R(k.modelValue).format("DD-MM-YYYY")];const j=D({date:"DD-MM-YYYY",month:"MM"});return T(()=>_.value,function(u){o("update:modelValue",Q(u[0],"dd.mm.yyyy"))}),(u,t)=>(c(),V(a(se),{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=x=>_.value=x),formatter:j.value,"input-classes":[d.invalid?"ring-red-400 focus:ring-red-600":"focus:ring-cyan-600","block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"],"as-single":"",i18n:"fr"},null,8,["modelValue","formatter","input-classes"]))}},ie={class:"px-4 sm:px-6 lg:px-8"},ne={class:"sm:flex sm:items-center"},de={class:"sm:flex-auto"},re={class:"text-2xl font-semibold leading-6 text-gray-900"},ce=e("p",{class:"mt-2 text-sm text-gray-700"}," Objectifs de l'agent. ",-1),me={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},ue=["onSubmit"],_e={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8"},ge=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Libellé et Valeur Cible"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Renseigner le libellé de l'objectif ainsi que la valeur cible.")],-1),pe={class:"md:col-span-2"},fe={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},xe={class:"sm:col-span-full"},ve={class:"mt-2"},he={class:"flex flex-col space-y-2"},ye={class:"sm:col-span-full"},be={class:"mt-2"},we={class:"flex flex-col space-y-2"},Ve={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2"},ke=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Disponibilité et Échéance"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Les moyens pour atteindre l'objectif sont ils réunis ? Qu'elle sera l'échéance pour cette objectif. ")],-1),je={class:"md:col-span-2"},$e={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},De={class:"sm:col-span-3"},Ue={class:"mt-2"},Me={class:"flex flex-col space-y-2"},qe={class:"sm:col-span-3"},Be={class:"mt-2"},Ne={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2"},Se=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Évaluation"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Renseigner les informations relatives à l'évaluation de cet objectif.")],-1),Ye={class:"md:col-span-2"},Oe={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},Ce={class:"mt-8 sm:col-span-3"},Fe={class:"mt-2"},Le={class:"relative mt-2"},Pe={class:"block truncate"},Te={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},ze={class:"mt-8 sm:col-span-3"},Ee={class:"mt-2"},Ge={class:"relative mt-2"},Ae={class:"block truncate"},He={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Re={class:"mt-8 col-span-full"},Qe={class:"mt-2"},Ze={class:"flex flex-col space-y-2"},Ie={key:0,class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-2 lg:px-8 border-t-2"},Je=e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Suivi de l'objectif",-1),Ke=e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Faites le suivi de cet objectif en renseignant le taux réalisé et en laissant un commentaire.",-1),We={class:"md:col-span-1"},Xe={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},ea={class:"col-span-full"},aa={class:"mt-2"},sa={class:"flex flex-col space-y-2"},ta={class:"sm:col-span-full"},la={class:"mt-2"},oa={class:"flex flex-col space-y-2"},ia={class:"flex items-center justify-between gap-x-6 border-t border-gray-900/10 px-4 py-4 sm:px-8"},Ma={__name:"SaveAgentGoal",props:{agent:{type:Object},phases:{type:Object},goal:{type:Object,required:!1,default:{}},history:{}},setup(d){const o=d,k=p(o.goal)?"Nouvel objectif":"Modifier l'objectif",_=p(o.goal)?"Fixer un objectif a cet agent":"Modifier un objectif pour cet agent",j=[{name:"Objectifs",href:route("agent-goals.index",{agent:o.agent.user_id}),current:!1},{name:p(o.goal)?"Nouveau":"Modifier",href:"#",current:!0}],u=D();let t;const x=()=>{t=E(p(o.goal)?{goal_name:"",goal_means_available:1,goal_expected_date:new Date,goal_expected_result:"",goal_marking:5,phase_id:B(o.phases)?o.phases[0].phase_id:null,evaluation_period_id:B(o.phases)?o.phases[0].periods[0].evaluation_period_id:null}:{goal_name:o.goal.goal_name,goal_means_available:o.goal.goal_means_available,goal_expected_date:new Date(o.goal.goal_expected_date),goal_expected_result:o.goal.goal_expected_result,goal_marking:o.goal.goal_marking,phase_id:o.goal.phase_id,goal_rate:o.goal.goal_rate,comment:"",evaluation_period_id:o.goal.evaluation_period_id})},z=()=>{p(o.goal)?t.post(route("agent-goals.store",{agent:o.agent.user_id}),{onSuccess:()=>x()}):t.put(route("agent-goals.update",{agent:o.agent.user_id,agent_goal:o.goal.goal_id}),{onSuccess:()=>x(),preserveScroll:!0})};return x(),T(()=>t.phase_id,function(w){w&&(u.value=o.phases.filter(n=>n.phase_id===w)[0].periods,t.evaluation_period_id=u.value[0].evaluation_period_id)},{immediate:!0}),(w,n)=>(c(),V(Z,null,{default:i(()=>[s(a(G),{title:"Paramètre de Phase"}),e("div",ie,[s(I,{pages:j}),e("div",ne,[e("div",de,[e("h1",re,"Objectifs de "+y(d.agent.user_display_name),1),ce]),e("div",me,[s(a(A),{href:w.route("agent-ratings.index",{agent:d.agent.user_id}),class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:i(()=>[r(" Évaluations "),s(a(le),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),s(J,{title:"Objectifs"}),s(K,{desc:a(_),title:a(k)},null,8,["desc","title"]),e("form",{class:"mt-8 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg bg-white",onSubmit:H(z,["prevent"])},[e("div",_e,[ge,e("div",pe,[e("div",fe,[e("div",xe,[s(m,{for:"start_date",required:""},{default:i(()=>[r("Libelle")]),_:1}),e("div",ve,[s(ee,{modelValue:a(t).goal_name,"onUpdate:modelValue":n[0]||(n[0]=l=>a(t).goal_name=l),invalid:a(t).errors.goal_name!==void 0},null,8,["modelValue","invalid"])]),e("div",he,[s(f,{message:a(t).errors.goal_name},null,8,["message"])])]),e("div",ye,[s(m,{for:"start_date",required:""},{default:i(()=>[r("Valeur Cible")]),_:1}),e("div",be,[s(N,{modelValue:a(t).goal_expected_result,"onUpdate:modelValue":n[1]||(n[1]=l=>a(t).goal_expected_result=l),invalid:a(t).errors.goal_expected_result!==void 0},null,8,["modelValue","invalid"])]),e("div",we,[s(f,{message:a(t).errors.goal_expected_result},null,8,["message"])])])])])]),e("div",Ve,[ke,e("div",je,[e("div",$e,[e("div",De,[s(m,{for:"start_date",required:""},{default:i(()=>[r("Échéance")]),_:1}),e("div",Ue,[s(oe,{modelValue:a(t).goal_expected_date,"onUpdate:modelValue":n[2]||(n[2]=l=>a(t).goal_expected_date=l),invalid:a(t).errors.goal_expected_date!==void 0},null,8,["modelValue","invalid"])]),e("div",Me,[s(f,{message:a(t).errors.goal_expected_date},null,8,["message"])])]),e("div",qe,[e("div",Be,[s(ae,{modelValue:a(t).goal_means_available,"onUpdate:modelValue":n[3]||(n[3]=l=>a(t).goal_means_available=l),desc:"Les moyens pour accomplir cette objectif sont t-il disponible ?",label:"Disponibilité des moyens"},null,8,["modelValue"])])])])])]),e("div",Ne,[Se,e("div",Ye,[e("div",Oe,[e("div",Ce,[s(m,null,{default:i(()=>[r("Année d'évaluation")]),_:1}),e("div",Fe,[s(a(L),{modelValue:a(t).phase_id,"onUpdate:modelValue":n[4]||(n[4]=l=>a(t).phase_id=l),as:"div"},{default:i(()=>[e("div",Le,[s(a(C),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-600 sm:text-sm sm:leading-6"},{default:i(()=>[e("span",Pe,y(d.phases.filter(l=>l.phase_id===a(t).phase_id)[0].phase_year),1),e("span",Te,[s(a(Y),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),s(U,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[s(a(F),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(c(!0),b(q,null,M(d.phases,l=>(c(),V(a(P),{key:l.phase_id,value:l.phase_id,as:"template"},{default:i(({active:v,selected:h})=>[e("li",{class:g([v?"bg-cyan-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:g([h?"font-semibold":"font-normal","block truncate"])},y(l.phase_year),3),h?(c(),b("span",{key:0,class:g([v?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[s(a(O),{"aria-hidden":"true",class:"h-5 w-5"})],2)):$("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",ze,[s(m,null,{default:i(()=>[r("Période")]),_:1}),e("div",Ee,[s(a(L),{modelValue:a(t).evaluation_period_id,"onUpdate:modelValue":n[5]||(n[5]=l=>a(t).evaluation_period_id=l),as:"div"},{default:i(()=>[e("div",Ge,[s(a(C),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-600 sm:text-sm sm:leading-6"},{default:i(()=>[e("span",Ae,y(u.value.filter(l=>l.evaluation_period_id===a(t).evaluation_period_id)[0].evaluation_period_name),1),e("span",He,[s(a(Y),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),s(U,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[s(a(F),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(c(!0),b(q,null,M(u.value,l=>(c(),V(a(P),{key:l.evaluation_period_id,value:l.evaluation_period_id,as:"template"},{default:i(({active:v,selected:h})=>[e("li",{class:g([v?"bg-cyan-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:g([h?"font-semibold":"font-normal","block truncate"])},y(l.evaluation_period_name),3),h?(c(),b("span",{key:0,class:g([v?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[s(a(O),{"aria-hidden":"true",class:"h-5 w-5"})],2)):$("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",Re,[s(m,{for:"start_date",required:""},{default:i(()=>[r("Barème")]),_:1}),e("div",Qe,[s(S,{modelValue:a(t).goal_marking,"onUpdate:modelValue":n[6]||(n[6]=l=>a(t).goal_marking=l),invalid:a(t).errors.goal_marking!==void 0,maxlength:"2"},null,8,["modelValue","invalid"])]),e("div",Ze,[s(f,{message:a(t).errors.goal_marking},null,8,["message"])])])])])]),a(p)(d.goal)?$("",!0):(c(),b("div",Ie,[e("div",null,[Je,Ke,s(te,{history:d.history},null,8,["history"])]),e("div",We,[e("div",Xe,[e("div",ea,[s(m,{for:"start_date",required:""},{default:i(()=>[r("Taux d'avancement")]),_:1}),e("div",aa,[s(S,{modelValue:a(t).goal_rate,"onUpdate:modelValue":n[7]||(n[7]=l=>a(t).goal_rate=l),invalid:a(t).errors.goal_rate!==void 0,maxlength:"3"},null,8,["modelValue","invalid"])]),e("div",sa,[s(f,{message:a(t).errors.goal_rate},null,8,["message"])])]),e("div",ta,[s(m,{for:"start_date"},{default:i(()=>[r("Commentaire")]),_:1}),e("div",la,[s(N,{modelValue:a(t).comment,"onUpdate:modelValue":n[8]||(n[8]=l=>a(t).comment=l),invalid:a(t).errors.comment!==void 0},null,8,["modelValue","invalid"])]),e("div",oa,[s(f,{message:a(t).errors.comment},null,8,["message"])])])])])])),e("div",ia,[s(W),s(X,{disabled:a(t).processing},{default:i(()=>[r(" Enregistrer")]),_:1},8,["disabled"])])],40,ue)])]),_:1}))}};export{Ma as default};
