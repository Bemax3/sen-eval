import{r as D,w as z,o as c,d as w,u as a,e as i,T as G,f as t,Z as A,a as e,t as v,g as d,l as H,i as P,q as U,v as q,n as m,p as M,c as y,j as N,k as $,F as B}from"./app-81706381.js";import{_ as R}from"./AuthenticatedLayout-e8ebc8e5.js";import{_ as Q}from"./Breadcrumbs-7a50f25d.js";import{_ as Z}from"./Separator-f35689af.js";import{_ as I}from"./SectionTitle-c4557759.js";import{_ as J}from"./FormIndications-64031431.js";import{_ as g}from"./InputLabel-f4db3ebe.js";import{_ as K}from"./SubmitButton-2eda4449.js";import{_ as p}from"./InputError-0137a0d7.js";import{m as W,p as X,i as f,a as O}from"./helper-df860a3e.js";import{_ as ee}from"./TextInput-7c706452.js";import{_ as ae}from"./TextArea-ba8bc83b.js";import{_ as se}from"./Switch-6711f18e.js";import{G as te}from"./vue-tailwind-datepicker-f24e4562.js";import{_ as le}from"./NumberInput-ed39bb68.js";import{_ as oe}from"./GoalActivity-a58d40dd.js";import{r as ie}from"./ChevronDoubleRightIcon-491a2280.js";import{r as S}from"./ChevronUpDownIcon-ee624a25.js";import{r as Y}from"./CheckIcon-98be674a.js";import{N as C,H as F,U as L,B as T}from"./listbox-e3924e79.js";import"./logo1637145113-c7398df9.js";import"./switch-eee1a676.js";import"./use-controllable-476ed86c.js";const re={__name:"DatePicker",props:{modelValue:{type:Date,required:!0},invalid:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:o}){const V=n,_=D([]);_.value=[W(V.modelValue).format("DD-MM-YYYY")];const j=D({date:"DD-MM-YYYY",month:"MM"});return z(()=>_.value,function(u){o("update:modelValue",X(u[0],"dd.mm.yyyy"))}),(u,s)=>(c(),w(a(te),{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=b=>_.value=b),formatter:j.value,"input-classes":[n.invalid?"ring-red-400 focus:ring-red-600":"focus:ring-cyan-700","dark:ring-2 dark:ring-gray-600 focus:dark:ring-2 bg-white dark:bg-grayish block w-full rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"],"as-single":"",i18n:"fr"},null,8,["modelValue","formatter","input-classes"]))}},ne={class:"px-4 sm:px-6 lg:px-8"},de={class:"sm:flex sm:items-center"},ce={class:"sm:flex-auto"},me={class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},ge=e("p",{class:"mt-2 text-sm text-gray-700 dark:text-white"}," Objectifs de l'agent. ",-1),ue={class:"space-x-2 mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},_e=["onSubmit"],pe={class:"grid max-w-full grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8"},fe=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Libellé et Valeur Cible"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Renseigner le libellé de l'objectif ainsi que la valeur cible.")],-1),xe={class:"md:col-span-2"},he={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},ve={class:"sm:col-span-full"},ye={class:"mt-2"},be={class:"flex flex-col space-y-2"},ke={class:"sm:col-span-full"},we={class:"mt-2 flex rounded-md shadow-sm"},Ve=e("span",{class:"inline-flex items-center rounded-r-md border border-l-0 border-gray-300 px-3 text-gray-500 dark:text-gray-100 sm:text-sm"},"%",-1),je={class:"flex flex-col space-y-2"},$e={class:"grid max-w-full grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2 dark:border-black"},De=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Disponibilité et Échéance"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Les moyens pour atteindre l'objectif sont ils réunis ? Qu'elle sera l'échéance pour cette objectif. ")],-1),Ue={class:"md:col-span-2"},qe={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},Me={class:"sm:col-span-3"},Ne={class:"mt-2"},Be={class:"flex flex-col space-y-2"},Oe={class:"sm:col-span-3"},Se={class:"mt-2"},Ye={class:"grid max-w-full grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2 dark:border-black"},Ce=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Évaluation"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Renseigner les informations relatives à l'évaluation de cet objectif.")],-1),Fe={class:"md:col-span-2"},Le={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},Te={class:"mt-8 sm:col-span-3"},ze={class:"mt-2"},Ee={class:"relative mt-2"},Ge={class:"block truncate"},Ae={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},He={class:"mt-8 sm:col-span-3"},Pe={class:"mt-2"},Re={class:"relative mt-2"},Qe={class:"block truncate"},Ze={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ie={class:"mt-8 col-span-full"},Je={class:"mt-2"},Ke={class:"flex flex-col space-y-2"},We={key:0,class:"grid max-w-full grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-2 lg:px-8 border-t-2 dark:border-black"},Xe=e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Suivi de l'objectif",-1),ea=e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Faites le suivi de cet objectif en renseignant le taux réalisé et en laissant un commentaire.",-1),aa={class:"md:col-span-1"},sa={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},ta={class:"col-span-full"},la={class:"mt-2 flex rounded-md shadow-sm"},oa=e("span",{class:"inline-flex items-center rounded-r-md border border-l-0 border-gray-300 px-3 text-gray-500 dark:text-gray-100 sm:text-sm"},"%",-1),ia={class:"flex flex-col space-y-2"},ra={class:"sm:col-span-full"},na={class:"mt-2"},da={class:"flex flex-col space-y-2"},ca={class:"flex items-center justify-between gap-x-6 border-t border-gray-900/10 dark:border-black px-4 py-4 sm:px-8"},Sa={__name:"SaveAgentGoal",props:{agent:{type:Object},phases:{type:Object},goal:{type:Object,required:!1,default:{}},history:{}},setup(n){const o=n,V=f(o.goal)?"Nouvel objectif":"Modifier l'objectif",_=f(o.goal)?"Fixer un objectif a cet agent":"Modifier un objectif pour cet agent",j=[{name:"Objectifs",href:route("agent-goals.index",{agent:o.agent.user_id}),current:!1},{name:f(o.goal)?"Nouveau":"Modifier",href:"#",current:!0}],u=D();let s;const b=()=>{s=G(f(o.goal)?{goal_name:"",goal_means_available:1,goal_expected_date:new Date,goal_expected_result:"",goal_marking:5,phase_id:O(o.phases)?o.phases[0].phase_id:null,evaluation_period_id:O(o.phases)?o.phases[0].periods[0].evaluation_period_id:null}:{goal_name:o.goal.goal_name,goal_means_available:o.goal.goal_means_available,goal_expected_date:new Date(o.goal.goal_expected_date),goal_expected_result:o.goal.goal_expected_result,goal_marking:o.goal.goal_marking,phase_id:o.goal.phase_id,goal_rate:o.goal.goal_rate,comment:"",evaluation_period_id:o.goal.evaluation_period_id})},E=()=>{f(o.goal)?s.post(route("agent-goals.store",{agent:o.agent.user_id}),{onSuccess:()=>s.reset()}):s.put(route("agent-goals.update",{agent:o.agent.user_id,agent_goal:o.goal.goal_id}),{onSuccess:()=>b(),preserveScroll:!0})};return b(),z(()=>s.phase_id,function(k){k&&(u.value=o.phases.filter(r=>r.phase_id===k)[0].periods,s.evaluation_period_id=u.value[0].evaluation_period_id)},{immediate:!0}),(k,r)=>(c(),w(R,null,{default:i(()=>[t(a(A),{title:"Nouvel Objectif"}),e("div",ne,[t(Q,{pages:j}),e("div",de,[e("div",ce,[e("h1",me,"Objectifs de "+v(n.agent.user_display_name),1),ge]),e("div",ue,[t(a(H),{href:k.route("agent-ratings.index",{agent:n.agent.user_id}),class:"inline-flex gap-x-1.5 rounded-md bg-cyan-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-cyan-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600"},{default:i(()=>[d(" Évaluations "),t(a(ie),{class:"-mr-0.5 h-5 w-5"})]),_:1},8,["href"])])]),t(Z,{title:"Objectifs"}),t(I,{desc:a(_),title:a(V)},null,8,["desc","title"]),e("form",{class:"mt-8 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg bg-white dark:bg-grayish",onSubmit:P(E,["prevent"])},[e("div",pe,[fe,e("div",xe,[e("div",he,[e("div",ve,[t(g,{for:"start_date",required:""},{default:i(()=>[d("Libelle")]),_:1}),e("div",ye,[t(ee,{modelValue:a(s).goal_name,"onUpdate:modelValue":r[0]||(r[0]=l=>a(s).goal_name=l),invalid:a(s).errors.goal_name!==void 0},null,8,["modelValue","invalid"])]),e("div",be,[t(p,{message:a(s).errors.goal_name},null,8,["message"])])]),e("div",ke,[t(g,{for:"start_date",required:""},{default:i(()=>[d("Valeur Cible")]),_:1}),e("div",we,[U(e("input",{"onUpdate:modelValue":r[1]||(r[1]=l=>a(s).goal_expected_result=l),class:m([a(s).errors.goal_expected_result!==void 0?"focus:ring-red-400 ring-red-500":"focus:ring-cyan-600 ring-gray-300 dark:ring-gray-600","bg-white dark:bg-grayish block w-full min-w-0 flex-1 rounded-none rounded-l-md border-0 py-1.5 text-gray-900 dark:text-white ring-1 ring-inset dark:ring-2 focus:dark:ring-2 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"])},null,2),[[q,a(s).goal_expected_result]]),Ve]),e("div",je,[t(p,{message:a(s).errors.goal_expected_result},null,8,["message"])])])])])]),e("div",$e,[De,e("div",Ue,[e("div",qe,[e("div",Me,[t(g,{for:"start_date",required:""},{default:i(()=>[d("Échéance")]),_:1}),e("div",Ne,[t(re,{modelValue:a(s).goal_expected_date,"onUpdate:modelValue":r[2]||(r[2]=l=>a(s).goal_expected_date=l),invalid:a(s).errors.goal_expected_date!==void 0},null,8,["modelValue","invalid"])]),e("div",Be,[t(p,{message:a(s).errors.goal_expected_date},null,8,["message"])])]),e("div",Oe,[e("div",Se,[t(se,{modelValue:a(s).goal_means_available,"onUpdate:modelValue":r[3]||(r[3]=l=>a(s).goal_means_available=l),desc:"Les moyens pour accomplir cette objectif sont t-il disponible ?",label:"Disponibilité des moyens"},null,8,["modelValue"])])])])])]),e("div",Ye,[Ce,e("div",Fe,[e("div",Le,[e("div",Te,[t(g,{required:""},{default:i(()=>[d("Année d'évaluation")]),_:1}),e("div",ze,[t(a(T),{modelValue:a(s).phase_id,"onUpdate:modelValue":r[4]||(r[4]=l=>a(s).phase_id=l),as:"div"},{default:i(()=>[e("div",Ee,[t(a(C),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-grayish py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-2 dark:ring-gray-600 focus:dark:ring-2 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:i(()=>[e("span",Ge,v(n.phases.filter(l=>l.phase_id===a(s).phase_id)[0].phase_year),1),e("span",Ae,[t(a(S),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),t(M,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[t(a(F),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(c(!0),y(B,null,N(n.phases,l=>(c(),w(a(L),{key:l.phase_id,value:l.phase_id,as:"template"},{default:i(({active:x,selected:h})=>[e("li",{class:m([x?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:m([h?"font-semibold":"font-normal","block truncate"])},v(l.phase_year),3),h?(c(),y("span",{key:0,class:m([x?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[t(a(Y),{"aria-hidden":"true",class:"h-5 w-5"})],2)):$("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",He,[t(g,{required:""},{default:i(()=>[d("Période")]),_:1}),e("div",Pe,[t(a(T),{modelValue:a(s).evaluation_period_id,"onUpdate:modelValue":r[5]||(r[5]=l=>a(s).evaluation_period_id=l),as:"div"},{default:i(()=>[e("div",Re,[t(a(C),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-grayish py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-2 dark:ring-gray-600 focus:dark:ring-2 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:i(()=>[e("span",Qe,v(u.value.filter(l=>l.evaluation_period_id===a(s).evaluation_period_id)[0].evaluation_period_name),1),e("span",Ze,[t(a(S),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),t(M,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[t(a(F),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(c(!0),y(B,null,N(u.value,l=>(c(),w(a(L),{key:l.evaluation_period_id,value:l.evaluation_period_id,as:"template"},{default:i(({active:x,selected:h})=>[e("li",{class:m([x?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:m([h?"font-semibold":"font-normal","block truncate"])},v(l.evaluation_period_name),3),h?(c(),y("span",{key:0,class:m([x?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[t(a(Y),{"aria-hidden":"true",class:"h-5 w-5"})],2)):$("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",Ie,[t(g,{for:"start_date",required:""},{default:i(()=>[d("Barème")]),_:1}),e("div",Je,[t(le,{modelValue:a(s).goal_marking,"onUpdate:modelValue":r[6]||(r[6]=l=>a(s).goal_marking=l),invalid:a(s).errors.goal_marking!==void 0,maxlength:"2"},null,8,["modelValue","invalid"])]),e("div",Ke,[t(p,{message:a(s).errors.goal_marking},null,8,["message"])])])])])]),a(f)(n.goal)?$("",!0):(c(),y("div",We,[e("div",null,[Xe,ea,t(oe,{history:n.history},null,8,["history"])]),e("div",aa,[e("div",sa,[e("div",ta,[t(g,{for:"start_date",required:""},{default:i(()=>[d("Taux d'avancement")]),_:1}),e("div",la,[U(e("input",{"onUpdate:modelValue":r[7]||(r[7]=l=>a(s).goal_rate=l),class:m([a(s).errors.goal_rate!==void 0?"focus:ring-red-400 ring-red-500":"focus:ring-cyan-600 ring-gray-300 dark:ring-gray-600","bg-white dark:bg-grayish block w-full min-w-0 flex-1 rounded-none rounded-l-md border-0 py-1.5 text-gray-900 dark:text-white ring-2 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"]),maxlength:"3",type:"number"},null,2),[[q,a(s).goal_rate]]),oa]),e("div",ia,[t(p,{message:a(s).errors.goal_rate},null,8,["message"])])]),e("div",ra,[t(g,{for:"start_date"},{default:i(()=>[d("Commentaire")]),_:1}),e("div",na,[t(ae,{modelValue:a(s).comment,"onUpdate:modelValue":r[8]||(r[8]=l=>a(s).comment=l),invalid:a(s).errors.comment!==void 0},null,8,["modelValue","invalid"])]),e("div",da,[t(p,{message:a(s).errors.comment},null,8,["message"])])])])])])),e("div",ca,[t(J),t(K,{processing:a(s).processing},{default:i(()=>[d(" Enregistrer")]),_:1},8,["processing"])])],40,_e)])]),_:1}))}};export{Sa as default};
