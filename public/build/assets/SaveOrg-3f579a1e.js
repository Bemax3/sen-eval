import{b,r as B,o as d,d as f,e as n,T as q,f as t,u as s,Z as E,a as e,t as x,i as F,g as u,c as w,j as L,n as c,k as V,F as M}from"./app-d9ff9300.js";import{_ as T}from"./AuthenticatedLayout-a01591ec.js";import{_ as k}from"./InputLabel-dd716769.js";import{_ as N}from"./TextInput-2bfcd3a9.js";import{_ as U}from"./SubmitButton-a0a39750.js";import{i as y}from"./helper-6aff9754.js";import{_ as O}from"./InputError-743a703b.js";import{_ as z}from"./Breadcrumbs-e961e0bb.js";import{_ as A}from"./FormIndications-c46ee7c8.js";import{W as G,Q as J,G as Q,X as W,Y as X,J as Y}from"./combobox-9917f101.js";import{r as D}from"./ChevronUpDownIcon-fd5da073.js";import{r as P}from"./CheckIcon-52f9444d.js";import"./logo1637145113-c7398df9.js";import"./use-controllable-52aedff9.js";const Z={class:"px-4 sm:px-6 lg:px-8"},H={class:"sm:flex sm:items-center"},I={class:"sm:flex-auto"},K={class:"text-2xl font-semibold leading-6 text-gray-900"},R=e("p",{class:"mt-2 text-sm text-gray-700"},"Ajouter ou modifier une organisation.",-1),ee={class:"mt-8 flow-root"},se=["onSubmit"],te={class:"px-4 py-6 sm:p-8"},re={class:"grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},oe={class:"sm:col-span-4"},ae={class:"mt-2"},ne={class:"col-span-full"},ie={class:"mt-2"},le={class:"flex flex-col space-y-2"},de={class:"sm:col-span-4"},me={class:"relative mt-2"},ue={class:"flex"},ce={class:"flex items-center justify-between gap-x-6 border-t border-gray-900/10 px-4 py-4 sm:px-8"},$e={__name:"SaveOrg",props:{org:{type:Object,default:{}},parents:{type:Array}},setup($){const a=$,C=b(()=>y(a.org)?"Nouvelle Organisation":"Modifier Organisation"),S=[{name:"Organisation",href:route("orgs.index"),current:!1},{name:"Nouveau",href:"#",current:!0}],g=a.parents,_=B(""),h=b(()=>_.value===""?g:g.filter(v=>v.org_name.toLowerCase().includes(_.value.toLowerCase())));let o;const p=()=>{o=q(y(a.org)?{org_name:"",org_type:"",parent_id:a.parents[0].org_id}:{org_name:a.org.org_name,org_type:a.org.org_type,parent_id:a.org.parent_id})},j=()=>{y(a.org)?o.post(route("orgs.store"),{onSuccess:()=>p()}):o.put(route("orgs.update",{org:a.org.org_id}),{onSuccess:()=>p()})};return p(),(v,i)=>(d(),f(T,null,{default:n(()=>[t(s(E),{title:"Modifier Organisation"}),e("div",Z,[t(z,{pages:S}),e("div",H,[e("div",I,[e("h1",K,x(C.value),1),R])]),e("div",ee,[e("form",{class:"bg-white shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl md:col-span-2",onSubmit:F(j,["prevent"])},[e("div",te,[e("div",re,[e("div",oe,[t(k,{for:"name",required:""},{default:n(()=>[u("Nom")]),_:1}),e("div",ae,[t(N,{id:"name",modelValue:s(o).org_name,"onUpdate:modelValue":i[0]||(i[0]=r=>s(o).org_name=r),invalid:s(o).errors.org_name!==void 0,autofocus:"",placeholder:"Nom"},null,8,["modelValue","invalid"])]),t(O,{message:s(o).errors.org_name},null,8,["message"])]),e("div",ne,[t(k,{for:"start_date",required:""},{default:n(()=>[u("Type")]),_:1}),e("div",ie,[t(N,{modelValue:s(o).org_type,"onUpdate:modelValue":i[1]||(i[1]=r=>s(o).org_type=r),disabled:!0},null,8,["modelValue"])]),e("div",le,[t(O,{message:s(o).errors.org_type},null,8,["message"])])]),e("div",de,[t(s(Y),{modelValue:s(o).parent_id,"onUpdate:modelValue":i[3]||(i[3]=r=>s(o).parent_id=r),as:"div"},{default:n(()=>[t(s(G),{class:"block text-sm font-medium leading-6 text-gray-900"},{default:n(()=>[u("Organisation Parent")]),_:1}),e("div",me,[t(s(J),{"display-value":r=>{var l;return(l=s(g).filter(m=>m.org_id===r)[0])==null?void 0:l.org_name},class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-12 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",onChange:i[2]||(i[2]=r=>_.value=r.target.value)},null,8,["display-value"]),t(s(Q),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:n(()=>[t(s(D),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),h.value.length>0?(d(),f(s(W),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:n(()=>[(d(!0),w(M,null,L(h.value,r=>(d(),f(s(X),{key:r.org_id,value:r.org_id,as:"template"},{default:n(({active:l,selected:m})=>[e("li",{class:c(["relative cursor-default select-none py-2 pl-3 pr-9",l?"bg-cyan-600  text-white":"text-gray-900"])},[e("div",ue,[e("span",{class:c(["truncate",m&&"font-semibold"])},x(r.org_name),3),e("span",{class:c(["ml-2 truncate text-gray-500",l?"text-cyan-200":"text-gray-500"])},x(r.org_responsibility_center),3)]),m?(d(),w("span",{key:0,class:c(["absolute inset-y-0 right-0 flex items-center pr-4",l?"text-white":"text-cyan-600"])},[t(s(P),{"aria-hidden":"true",class:"h-5 w-5"})],2)):V("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):V("",!0)])]),_:1},8,["modelValue"])])])]),e("div",ce,[t(A),t(U,{processing:s(o).processing},{default:n(()=>[u(" Enregistrer")]),_:1},8,["processing"])])],40,se)])])]),_:1}))}};export{$e as default};
