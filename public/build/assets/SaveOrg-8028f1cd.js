import{b,r as B,o as d,d as f,e as i,T as q,f as s,u as t,Z as E,a as e,t as x,i as F,g as u,c as w,j as L,n as g,k,F as M}from"./app-589b6ab5.js";import{_ as T}from"./AuthenticatedLayout-a2654eb8.js";import{_ as V}from"./InputLabel-abf86e56.js";import{_ as N}from"./TextInput-9778b1d8.js";import{_ as U}from"./SubmitButton-c6a61157.js";import{i as y}from"./helper-9d93711f.js";import{_ as O}from"./InputError-9ab85800.js";import{_ as z}from"./Breadcrumbs-65bf6fa9.js";import{_ as A}from"./FormIndications-9edc05da.js";import{W as G,Q as J,G as Q,X as W,Y as X,J as Y}from"./combobox-d0bdc8b2.js";import{r as D}from"./ChevronUpDownIcon-b285a6e4.js";import{r as P}from"./CheckIcon-c0a2e6bc.js";import"./logo1637145113-c7398df9.js";import"./use-controllable-17c4dbac.js";const Z={class:"px-4 sm:px-6 lg:px-8"},H={class:"sm:flex sm:items-center"},I={class:"sm:flex-auto"},K={class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},R=e("p",{class:"mt-2 text-sm text-gray-700 dark:text-white"},"Ajouter ou modifier une organisation.",-1),ee={class:"mt-8 flow-root"},te=["onSubmit"],se={class:"px-4 py-6 sm:p-8"},re={class:"grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},ae={class:"sm:col-span-4"},oe={class:"mt-2"},ie={class:"col-span-full"},ne={class:"mt-2"},le={class:"flex flex-col space-y-2"},de={class:"sm:col-span-4"},me={class:"relative mt-2"},ue={class:"flex"},ge={class:"flex items-center justify-between gap-x-6 border-t border-gray-900/10 px-4 py-4 sm:px-8"},$e={__name:"SaveOrg",props:{org:{type:Object,default:{}},parents:{type:Array}},setup($){const o=$,C=b(()=>y(o.org)?"Nouvelle Organisation":"Modifier Organisation"),S=[{name:"Organisation",href:route("orgs.index"),current:!1},{name:"Nouveau",href:"#",current:!0}],c=o.parents,_=B(""),h=b(()=>_.value===""?c:c.filter(v=>v.org_name.toLowerCase().includes(_.value.toLowerCase())));let a;const p=()=>{a=q(y(o.org)?{org_name:"",org_type:"",parent_id:o.parents[0].org_id}:{org_name:o.org.org_name,org_type:o.org.org_type,parent_id:o.org.parent_id})},j=()=>{y(o.org)?a.post(route("orgs.store"),{onSuccess:()=>p()}):a.put(route("orgs.update",{org:o.org.org_id}),{onSuccess:()=>p()})};return p(),(v,n)=>(d(),f(T,null,{default:i(()=>[s(t(E),{title:"Modifier Organisation"}),e("div",Z,[s(z,{pages:S}),e("div",H,[e("div",I,[e("h1",K,x(C.value),1),R])]),e("div",ee,[e("form",{class:"bg-white dark:bg-grayish shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl md:col-span-2",onSubmit:F(j,["prevent"])},[e("div",se,[e("div",re,[e("div",ae,[s(V,{for:"name",required:""},{default:i(()=>[u("Nom")]),_:1}),e("div",oe,[s(N,{id:"name",modelValue:t(a).org_name,"onUpdate:modelValue":n[0]||(n[0]=r=>t(a).org_name=r),invalid:t(a).errors.org_name!==void 0,autofocus:"",placeholder:"Nom"},null,8,["modelValue","invalid"])]),s(O,{message:t(a).errors.org_name},null,8,["message"])]),e("div",ie,[s(V,{for:"start_date",required:""},{default:i(()=>[u("Type")]),_:1}),e("div",ne,[s(N,{modelValue:t(a).org_type,"onUpdate:modelValue":n[1]||(n[1]=r=>t(a).org_type=r),disabled:!0},null,8,["modelValue"])]),e("div",le,[s(O,{message:t(a).errors.org_type},null,8,["message"])])]),e("div",de,[s(t(Y),{modelValue:t(a).parent_id,"onUpdate:modelValue":n[3]||(n[3]=r=>t(a).parent_id=r),as:"div"},{default:i(()=>[s(t(G),{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white"},{default:i(()=>[u("Organisation Parent")]),_:1}),e("div",me,[s(t(J),{"display-value":r=>{var l;return(l=t(c).filter(m=>m.org_id===r)[0])==null?void 0:l.org_name},class:"w-full rounded-md border-0 bg-white dark:bg-grayish py-1.5 pl-3 pr-12 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",onChange:n[2]||(n[2]=r=>_.value=r.target.value)},null,8,["display-value"]),s(t(Q),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:i(()=>[s(t(D),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),h.value.length>0?(d(),f(t(W),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(d(!0),w(M,null,L(h.value,r=>(d(),f(t(X),{key:r.org_id,value:r.org_id,as:"template"},{default:i(({active:l,selected:m})=>[e("li",{class:g(["relative cursor-default select-none py-2 pl-3 pr-9",l?"bg-cyan-600  text-white":"text-gray-900 dark:text-white"])},[e("div",ue,[e("span",{class:g(["truncate",m&&"font-semibold"])},x(r.org_name),3),e("span",{class:g(["ml-2 truncate text-gray-500 dark:text-gray-100",l?"text-cyan-200":"text-gray-500 dark:text-gray-100"])},x(r.org_responsibility_center),3)]),m?(d(),w("span",{key:0,class:g(["absolute inset-y-0 right-0 flex items-center pr-4",l?"text-white":"text-cyan-600"])},[s(t(P),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):k("",!0)])]),_:1},8,["modelValue"])])])]),e("div",ge,[s(A),s(U,{processing:t(a).processing},{default:i(()=>[u(" Enregistrer")]),_:1},8,["processing"])])],40,te)])])]),_:1}))}};export{$e as default};
