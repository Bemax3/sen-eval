import{b as V,o as d,d as v,e as o,T as N,f as t,u as e,Z as $,a as s,t as u,i as B,g as n,p as S,c as h,j as C,n as f,k as U,F as j}from"./app-589b6ab5.js";import{_ as q}from"./AuthenticatedLayout-a2654eb8.js";import{_ as m}from"./InputLabel-abf86e56.js";import{_ as T}from"./TextInput-9778b1d8.js";import{_ as A}from"./TextArea-c847ba0a.js";import{_ as D}from"./SubmitButton-c6a61157.js";import{i as c}from"./helper-9d93711f.js";import{_ as k}from"./InputError-9ab85800.js";import{_ as E}from"./Breadcrumbs-65bf6fa9.js";import{_ as F}from"./FormIndications-9edc05da.js";import{_ as M}from"./NumberInput-934795d3.js";import{_ as z}from"./Switch-d5c5c9c8.js";import{r as H}from"./ChevronUpDownIcon-b285a6e4.js";import{r as L}from"./CheckIcon-c0a2e6bc.js";import{N as O,H as Z,U as G,B as I}from"./listbox-8a5adbf0.js";import"./logo1637145113-c7398df9.js";import"./switch-186182f9.js";import"./use-controllable-17c4dbac.js";const J={class:"px-4 sm:px-6 lg:px-8"},K={class:"sm:flex sm:items-center"},P={class:"sm:flex-auto"},Q={class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},R=s("p",{class:"mt-2 text-sm text-gray-700 dark:text-white"},"Ajouter ou modifier une compétence qui sera notée lors de l'évaluation.",-1),W={class:"mt-8 flow-root"},X=["onSubmit"],Y={class:"px-4 py-6 sm:p-8"},ee={class:"grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},se={class:"sm:col-span-4"},le={class:"mt-2"},te={class:"sm:col-span-4"},ie={class:"mt-2"},ae={class:"col-span-full"},oe={class:"mt-2"},re={class:"sm:col-span-4"},ne={class:"mt-2"},de={class:"relative mt-2"},me={class:"block truncate"},ce={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},_e={class:"col-span-full"},pe={class:"mt-2"},ue={class:"flex items-center justify-between gap-x-6 border-t border-gray-900/10 px-4 py-4 sm:px-8"},Ae={__name:"SaveSkill",props:{skill:{type:Object,default:{}},types:{type:Array}},setup(_){const a=_,x=V(()=>c(a.skill)?"Nouvelle Compétence":"Modifier la Compétence"),b=[{name:"Compétences",href:route("skills.index"),current:!1},{name:c(a.skill)?"Nouveau":"Modifier",href:"#",current:!0}];let l;const p=()=>{l=N(c(a.skill)?{skill_name:"",skill_marking:5,skill_desc:"",skill_type_id:a.types[0].skill_type_id,skill_is_active:1}:{skill_name:a.skill.skill_name||"",skill_marking:a.skill.skill_marking||5,skill_desc:a.skill.skill_desc||"",skill_type_id:a.skill.skill_type_id||a.types[0].skill_type_id,skill_is_active:a.skill.skill_is_active})},w=()=>{c(a.skill)?l.post(route("skills.store"),{onSuccess:()=>p()}):l.put(route("skills.update",{skill:a.skill.skill_id}),{onSuccess:()=>p()})};return p(),(fe,r)=>(d(),v(q,null,{default:o(()=>[t(e($),{title:"Nouvelle Compétence"}),s("div",J,[t(E,{pages:b}),s("div",K,[s("div",P,[s("h1",Q,u(x.value),1),R])]),s("div",W,[s("form",{class:"bg-white dark:bg-grayish shadow-sm ring-1 ring-gray-900/5 sm:rounded-xl md:col-span-2",onSubmit:B(w,["prevent"])},[s("div",Y,[s("div",ee,[s("div",se,[t(m,{for:"name",required:""},{default:o(()=>[n("Nom de la compétence")]),_:1}),s("div",le,[t(T,{id:"name",modelValue:e(l).skill_name,"onUpdate:modelValue":r[0]||(r[0]=i=>e(l).skill_name=i),invalid:e(l).errors.skill_name!==void 0,autofocus:"",placeholder:"Nom"},null,8,["modelValue","invalid"])]),t(k,{message:e(l).errors.skill_name},null,8,["message"])]),s("div",te,[t(m,{for:"name",required:""},{default:o(()=>[n("Barème")]),_:1}),s("div",ie,[t(M,{id:"marking",modelValue:e(l).skill_marking,"onUpdate:modelValue":r[1]||(r[1]=i=>e(l).skill_marking=i),invalid:e(l).errors.skill_marking!==void 0,placeholder:"Barème"},null,8,["modelValue","invalid"])]),t(k,{message:e(l).errors.skill_marking},null,8,["message"])]),s("div",ae,[t(m,{for:"description",required:""},{default:o(()=>[n("Description")]),_:1}),s("div",oe,[t(A,{id:"description",modelValue:e(l).skill_desc,"onUpdate:modelValue":r[2]||(r[2]=i=>e(l).skill_desc=i),invalid:e(l).errors.skill_desc!==void 0,placeholder:"Description"},null,8,["modelValue","invalid"])]),t(k,{message:e(l).errors.skill_desc},null,8,["message"])]),s("div",re,[t(m,null,{default:o(()=>[n("Type")]),_:1}),s("div",ne,[t(e(I),{modelValue:e(l).skill_type_id,"onUpdate:modelValue":r[3]||(r[3]=i=>e(l).skill_type_id=i),as:"div"},{default:o(()=>[s("div",de,[t(e(O),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-grayish py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:o(()=>[s("span",me,u(_.types.filter(i=>i.skill_type_id===e(l).skill_type_id)[0].skill_type_name),1),s("span",ce,[t(e(H),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),t(S,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:o(()=>[t(e(Z),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:o(()=>[(d(!0),h(j,null,C(_.types,i=>(d(),v(e(G),{key:i.skill_type_id,value:i.skill_type_id,as:"template"},{default:o(({active:g,selected:y})=>[s("li",{class:f([g?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[s("span",{class:f([y?"font-semibold":"font-normal","block truncate"])},u(i.skill_type_name),3),y?(d(),h("span",{key:0,class:f([g?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[t(e(L),{"aria-hidden":"true",class:"h-5 w-5"})],2)):U("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),s("div",_e,[s("div",pe,[t(z,{modelValue:e(l).skill_is_active,"onUpdate:modelValue":r[4]||(r[4]=i=>e(l).skill_is_active=i),desc:"Sera t-il possible de proposer ou demander ce type de formation lors des évaluations",label:"Actif"},null,8,["modelValue"])])])])]),s("div",ue,[t(F),t(D,{processing:e(l).processing},{default:o(()=>[n(" Enregistrer ")]),_:1},8,["processing"])])],40,X)])])]),_:1}))}};export{Ae as default};
