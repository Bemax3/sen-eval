import{T as N,r as C,d as E,w as G,o as m,e as x,f as i,g as a,u as s,Z as R,a as e,t as v,h as S,k as V,p as j,c as y,i as D,F as M,j as k,n as p}from"./app-3b2f3c0c.js";import{_ as q,i as H,c as Y,m as P}from"./AuthenticatedLayout-ec823edb.js";import{_ as I}from"./Breadcrumbs-a0ce4346.js";import{_ as d}from"./TextInput-c59669aa.js";import{_ as T}from"./SubmitButton-b53bcf51.js";import{_ as A}from"./InputLabel-ed6f8180.js";import{r as n}from"./LockClosedIcon-bb1897fe.js";import{r as $}from"./ChevronUpDownIcon-97dd4ab0.js";import{r as B}from"./CheckIcon-c20b0f88.js";import{N as J,H as O,B as Q,U as W}from"./listbox-7c0d5138.js";import{W as X,Q as Z,G as K,X as ee,J as se,Y as te}from"./combobox-ec8f7557.js";import"./logo1637145113-11387d37.js";import"./use-controllable-e3c874bc.js";const ae={class:"px-4 sm:px-6 lg:px-8"},le={class:"sm:flex sm:items-center"},oe={class:"sm:flex-auto"},re={class:"text-2xl font-semibold leading-6 text-gray-900"},ie=e("p",{class:"mt-2 text-sm text-gray-700"}," Informations personnelles et administratives de l'agent. ",-1),ne={class:"mt-8 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg bg-white"},de={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8"},ue=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Informations Personnelles"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Vous ne pouvez pas modifier ces informations.")],-1),me={class:"md:col-span-2"},ce={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},_e=e("div",{class:"col-span-full flex items-center gap-x-8"},[e("img",{alt:"",class:"h-24 w-24 flex-none rounded-lg bg-cyan-600 object-cover"})],-1),ge={class:"sm:col-span-3"},pe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"Prénom",-1),fe={class:"relative shadow-sm rounded-md mt-2"},he={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},xe={class:"sm:col-span-3"},ve=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"Nom",-1),ye={class:"relative shadow-sm rounded-md mt-2"},be={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},we={class:"col-span-full"},Ve=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"email"},"Email",-1),ke={class:"relative shadow-sm rounded-md mt-2"},Ue={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ne={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2"},Ce=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Informations Administratives"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Changer le supérieur hiérarchique de l'agent ou son organisation.")],-1),De=["onSubmit"],Me={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},Ye={class:"col-span-full"},Pe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"confirm-password"},"Organisation",-1),$e={class:"relative shadow-sm rounded-md mt-2"},Be={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Fe={class:"col-span-full"},ze=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"confirm-password"},"Poste",-1),Le={class:"relative shadow-sm rounded-md mt-2"},Ee={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ge={class:"col-span-full"},Re=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"confirm-password"},"College",-1),Se={class:"relative shadow-sm rounded-md mt-2"},je={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},qe={class:"sm:col-span-3"},He=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"Matricule",-1),Ie={class:"relative shadow-sm rounded-md mt-2"},Te={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ae={class:"sm:col-span-3"},Je=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"Centre de Responsabilité",-1),Oe={class:"relative shadow-sm rounded-md mt-2"},Qe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},We={class:"sm:col-span-3"},Xe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"GF",-1),Ze={class:"relative shadow-sm rounded-md mt-2"},Ke={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},es={class:"sm:col-span-3"},ss=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"NR",-1),ts={class:"relative shadow-sm rounded-md mt-2"},as={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ls={class:"sm:col-span-3"},os=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"Date Promotion GF",-1),rs={class:"relative shadow-sm rounded-md mt-2"},is=["value"],ns={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ds={class:"sm:col-span-3"},us=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"Date Promotion NR",-1),ms={class:"relative shadow-sm rounded-md mt-2"},cs=["value"],_s={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},gs={class:"sm:col-span-4"},ps={class:"mt-2"},fs={class:"relative mt-2"},hs={class:"block truncate"},xs={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},vs={class:"col-span-full"},ys={class:"relative mt-2"},bs={class:"flex"},ws={class:"mt-8 flex"},Es={__name:"UserProfile",props:{user:{type:Object},n1s:{type:Array},roles:{}},setup(_){const r=_,F=[{name:"Profil",href:"#",current:!0}],g=N({n1_id:r.user.n1?r.user.n1.user_id:null,role_id:r.user.role_id}),b=r.n1s,f=C(b),h=C(""),U=E({keyword:"",fields:["user_matricule","user_display_name"]}),o=(()=>N(H(r.user)?{}:{user_first_name:r.user.user_first_name||"",user_last_name:r.user.user_last_name||"",email:r.user.email||"",org_name:r.user.org?r.user.org.org_name:"",user_title:r.user.user_title||"",user_matricule:r.user.user_matricule||"",group_name:r.user.group?r.user.group.group_name:"",user_responsibility_center:r.user.user_responsibility_center||"",user_gf:r.user.user_gf||"",user_nr:r.user.user_nr||"",user_gf_prom_date:r.user.user_gf_prom_date||"",user_nr_prom_date:r.user.user_nr_prom_date||""}))(),z=()=>g.put(route("users.update",{user:r.user.user_id})),L=()=>axios.post(route("users.search"),U);return G(()=>h.value,function(w){let l=w===""?b:b.filter(t=>t.user_matricule.toLowerCase().includes(h.value.toLowerCase())||t.user_display_name.toLowerCase().includes(h.value.toLowerCase()));l.length>0?f.value=l:w.length>=3&&L().then(t=>f.value=t.data)}),(w,l)=>(m(),x(q,null,{default:i(()=>[a(s(R),{title:"Profil"}),e("div",ae,[a(I,{pages:F}),e("div",le,[e("div",oe,[e("h1",re,"Profil de "+v(_.user.user_display_name),1),ie])]),e("div",ne,[e("div",de,[ue,e("form",me,[e("div",ce,[_e,e("div",ge,[pe,e("div",fe,[a(d,{modelValue:s(o).user_first_name,"onUpdate:modelValue":l[0]||(l[0]=t=>s(o).user_first_name=t),disabled:!0},null,8,["modelValue"]),e("div",he,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",xe,[ve,e("div",ye,[a(d,{modelValue:s(o).user_last_name,"onUpdate:modelValue":l[1]||(l[1]=t=>s(o).user_last_name=t),disabled:!0},null,8,["modelValue"]),e("div",be,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",we,[Ve,e("div",ke,[a(d,{modelValue:s(o).email,"onUpdate:modelValue":l[2]||(l[2]=t=>s(o).email=t),disabled:!0},null,8,["modelValue"]),e("div",Ue,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])])])])]),e("div",Ne,[Ce,e("form",{class:"md:col-span-2",onSubmit:S(z,["prevent"])},[e("div",Me,[e("div",Ye,[Pe,e("div",$e,[a(d,{modelValue:s(o).org_name,"onUpdate:modelValue":l[3]||(l[3]=t=>s(o).org_name=t),disabled:!0},null,8,["modelValue"]),e("div",Be,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Fe,[ze,e("div",Le,[a(d,{modelValue:s(o).user_title,"onUpdate:modelValue":l[4]||(l[4]=t=>s(o).user_title=t),disabled:!0},null,8,["modelValue"]),e("div",Ee,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ge,[Re,e("div",Se,[a(d,{modelValue:s(o).group_name,"onUpdate:modelValue":l[5]||(l[5]=t=>s(o).group_name=t),disabled:!0},null,8,["modelValue"]),e("div",je,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",qe,[He,e("div",Ie,[a(d,{modelValue:s(o).user_matricule,"onUpdate:modelValue":l[6]||(l[6]=t=>s(o).user_matricule=t),disabled:!0},null,8,["modelValue"]),e("div",Te,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ae,[Je,e("div",Oe,[a(d,{modelValue:s(o).user_responsibility_center,"onUpdate:modelValue":l[7]||(l[7]=t=>s(o).user_responsibility_center=t),disabled:!0},null,8,["modelValue"]),e("div",Qe,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",We,[Xe,e("div",Ze,[a(d,{modelValue:s(o).user_gf,"onUpdate:modelValue":l[8]||(l[8]=t=>s(o).user_gf=t),disabled:!0},null,8,["modelValue"]),e("div",Ke,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",es,[ss,e("div",ts,[a(d,{modelValue:s(o).user_nr,"onUpdate:modelValue":l[9]||(l[9]=t=>s(o).user_nr=t),disabled:!0},null,8,["modelValue"]),e("div",as,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ls,[os,e("div",rs,[e("input",{disabled:!0,value:s(Y)(s(P)(s(o).user_gf_prom_date).format("DD MMMM YYYY")),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,is),e("div",ns,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ds,[us,e("div",ms,[e("input",{disabled:!0,value:s(Y)(s(P)(s(o).user_nr_prom_date).format("DD MMMM YYYY")),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,cs),e("div",_s,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",gs,[a(A,null,{default:i(()=>[V("Role")]),_:1}),e("div",ps,[a(s(Q),{modelValue:s(g).role_id,"onUpdate:modelValue":l[10]||(l[10]=t=>s(g).role_id=t),as:"div"},{default:i(()=>[e("div",fs,[a(s(J),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-600 sm:text-sm sm:leading-6"},{default:i(()=>[e("span",hs,v(_.roles.filter(t=>t.role_id===s(g).role_id)[0].role_name),1),e("span",xs,[a(s($),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),a(j,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[a(s(O),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(m(!0),y(M,null,D(_.roles,t=>(m(),x(s(W),{key:t.role_id,value:t.role_id,as:"template"},{default:i(({active:u,selected:c})=>[e("li",{class:p([u?"bg-cyan-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:p([c?"font-semibold":"font-normal","block truncate"])},v(t.role_name),3),c?(m(),y("span",{key:0,class:p([u?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[a(s(B),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",vs,[a(s(se),{modelValue:s(g).n1_id,"onUpdate:modelValue":l[12]||(l[12]=t=>s(g).n1_id=t),as:"div"},{default:i(()=>[a(s(X),{class:"block text-sm font-medium leading-6 text-gray-900"},{default:i(()=>[V("Supérieure Hiérarchique (N + 1)")]),_:1}),e("div",ys,[a(s(Z),{"display-value":t=>{let u=_.user.n1?_.user.n1:f.value.filter(c=>c.user_id===t)[0];return u?u.user_matricule+" "+u.user_display_name:"Non défini"},class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-12 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-cyan-600 sm:text-sm sm:leading-6",onChange:l[11]||(l[11]=t=>{U.keyword=h.value=t.target.value})},null,8,["display-value"]),a(s(K),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:i(()=>[a(s($),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),f.value.length>0?(m(),x(s(ee),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(m(!0),y(M,null,D(f.value,t=>(m(),x(s(te),{key:t.user_id,value:t.user_id,as:"template"},{default:i(({active:u,selected:c})=>[e("li",{class:p(["relative cursor-default select-none py-2 pl-3 pr-9",u?"bg-cyan-600 text-white":"text-gray-900"])},[e("div",bs,[e("span",{class:p(["truncate",c&&"font-semibold"])},v((t==null?void 0:t.user_matricule)+" "+(t==null?void 0:t.user_display_name)),3)]),c?(m(),y("span",{key:0,class:p(["absolute inset-y-0 right-0 flex items-center pr-4",u?"text-white":"text-cyan-600"])},[a(s(B),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):k("",!0)])]),_:1},8,["modelValue"])])]),e("div",ws,[a(T,null,{default:i(()=>[V(" Enregistrer")]),_:1})])],40,De)])])])]),_:1}))}};export{Es as default};
