import{T as N,r as C,h as E,w as G,o as m,d as x,e as i,f as a,u as s,Z as R,a as e,t as v,i as S,g as k,p as j,c as y,j as D,n as h,k as V,F as M}from"./app-97f24108.js";import{_ as q}from"./AuthenticatedLayout-60aabe79.js";import{_ as H}from"./Breadcrumbs-128d3fe8.js";import{_ as d}from"./TextInput-d6407a33.js";import{_ as I}from"./SubmitButton-ac7c7d0a.js";import{i as T,c as Y,m as P}from"./helper-00cc7808.js";import{_ as A}from"./InputLabel-29a6a3dc.js";import{r as n}from"./LockClosedIcon-660c5c30.js";import{r as $}from"./ChevronUpDownIcon-7bd5fcff.js";import{r as B}from"./CheckIcon-1e89fb52.js";import{N as J,H as O,U as Q,B as W}from"./listbox-20c62403.js";import{W as X,Q as Z,G as K,X as ee,Y as se,J as te}from"./combobox-8b7fd72b.js";import"./logo1637145113-c7398df9.js";import"./use-controllable-5e55b309.js";const ae={class:"px-4 sm:px-6 lg:px-8"},re={class:"sm:flex sm:items-center"},le={class:"sm:flex-auto"},oe={class:"text-2xl font-semibold leading-6 text-gray-900 dark:text-white"},ie=e("p",{class:"mt-2 text-sm text-gray-700 dark:text-white"}," Informations personnelles et administratives de l'agent. ",-1),ne={class:"mt-8 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg bg-white dark:bg-grayish"},de={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8"},ue=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Informations Personnelles"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Vous ne pouvez pas modifier ces informations.")],-1),me={class:"md:col-span-2"},ce={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},_e=e("div",{class:"col-span-full flex items-center gap-x-8"},[e("img",{alt:"",class:"h-24 w-24 flex-none rounded-lg bg-cyan-600 object-cover"})],-1),ge={class:"sm:col-span-3"},he=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"Prénom",-1),pe={class:"relative shadow-sm rounded-md mt-2"},fe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},xe={class:"sm:col-span-3"},ve=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"Nom",-1),ye={class:"relative shadow-sm rounded-md mt-2"},be={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},we={class:"col-span-full"},ke=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"email"},"Email",-1),Ve={class:"relative shadow-sm rounded-md mt-2"},Ue={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ne={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2"},Ce=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900 dark:text-white"},"Informations Administratives"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Changer le supérieur hiérarchique de l'agent ou son organisation.")],-1),De=["onSubmit"],Me={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},Ye={class:"col-span-full"},Pe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"confirm-password"},"Organisation",-1),$e={class:"relative shadow-sm rounded-md mt-2"},Be={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Fe={class:"col-span-full"},ze=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"confirm-password"},"Poste",-1),Le={class:"relative shadow-sm rounded-md mt-2"},Ee={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ge={class:"col-span-full"},Re=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"confirm-password"},"College",-1),Se={class:"relative shadow-sm rounded-md mt-2"},je={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},qe={class:"sm:col-span-3"},He=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"Matricule",-1),Ie={class:"relative shadow-sm rounded-md mt-2"},Te={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ae={class:"sm:col-span-3"},Je=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"Centre de Responsabilité",-1),Oe={class:"relative shadow-sm rounded-md mt-2"},Qe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},We={class:"sm:col-span-3"},Xe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"GF",-1),Ze={class:"relative shadow-sm rounded-md mt-2"},Ke={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},es={class:"sm:col-span-3"},ss=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"NR",-1),ts={class:"relative shadow-sm rounded-md mt-2"},as={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},rs={class:"sm:col-span-3"},ls=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"first-name"},"Date Promotion GF",-1),os={class:"relative shadow-sm rounded-md mt-2"},is=["value"],ns={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ds={class:"sm:col-span-3"},us=e("label",{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white",for:"last-name"},"Date Promotion NR",-1),ms={class:"relative shadow-sm rounded-md mt-2"},cs=["value"],_s={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},gs={class:"sm:col-span-4"},hs={class:"mt-2"},ps={class:"relative mt-2"},fs={class:"block truncate"},xs={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},vs={class:"col-span-full"},ys={class:"relative mt-2"},bs={class:"flex"},ws={class:"mt-8 flex"},Gs={__name:"UserProfile",props:{user:{type:Object},n1s:{type:Array},roles:{}},setup(_){const o=_,F=[{name:"Profil",href:"#",current:!0}],g=N({n1_id:o.user.n1?o.user.n1.user_id:null,role_id:o.user.role_id}),b=o.n1s,p=C(b),f=C(""),U=E({keyword:"",fields:["user_matricule","user_display_name"]}),l=(()=>N(T(o.user)?{}:{user_first_name:o.user.user_first_name||"",user_last_name:o.user.user_last_name||"",email:o.user.email||"",org_name:o.user.org?o.user.org.org_name:"",user_title:o.user.user_title||"",user_matricule:o.user.user_matricule||"",group_name:o.user.group?o.user.group.group_name:"",user_responsibility_center:o.user.user_responsibility_center||"",user_gf:o.user.user_gf||"",user_nr:o.user.user_nr||"",user_gf_prom_date:o.user.user_gf_prom_date||"",user_nr_prom_date:o.user.user_nr_prom_date||""}))(),z=()=>g.put(route("users.update",{user:o.user.user_id})),L=()=>axios.post(route("users.search"),U);return G(()=>f.value,function(w){let r=w===""?b:b.filter(t=>t.user_matricule.toLowerCase().includes(f.value.toLowerCase())||t.user_display_name.toLowerCase().includes(f.value.toLowerCase()));r.length>0?p.value=r:w.length>=3&&L().then(t=>p.value=t.data)}),(w,r)=>(m(),x(q,null,{default:i(()=>[a(s(R),{title:"Profil"}),e("div",ae,[a(H,{pages:F}),e("div",re,[e("div",le,[e("h1",oe,"Profil de "+v(_.user.user_display_name),1),ie])]),e("div",ne,[e("div",de,[ue,e("form",me,[e("div",ce,[_e,e("div",ge,[he,e("div",pe,[a(d,{modelValue:s(l).user_first_name,"onUpdate:modelValue":r[0]||(r[0]=t=>s(l).user_first_name=t),disabled:!0},null,8,["modelValue"]),e("div",fe,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",xe,[ve,e("div",ye,[a(d,{modelValue:s(l).user_last_name,"onUpdate:modelValue":r[1]||(r[1]=t=>s(l).user_last_name=t),disabled:!0},null,8,["modelValue"]),e("div",be,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",we,[ke,e("div",Ve,[a(d,{modelValue:s(l).email,"onUpdate:modelValue":r[2]||(r[2]=t=>s(l).email=t),disabled:!0},null,8,["modelValue"]),e("div",Ue,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])])])])]),e("div",Ne,[Ce,e("form",{class:"md:col-span-2",onSubmit:S(z,["prevent"])},[e("div",Me,[e("div",Ye,[Pe,e("div",$e,[a(d,{modelValue:s(l).org_name,"onUpdate:modelValue":r[3]||(r[3]=t=>s(l).org_name=t),disabled:!0},null,8,["modelValue"]),e("div",Be,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Fe,[ze,e("div",Le,[a(d,{modelValue:s(l).user_title,"onUpdate:modelValue":r[4]||(r[4]=t=>s(l).user_title=t),disabled:!0},null,8,["modelValue"]),e("div",Ee,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ge,[Re,e("div",Se,[a(d,{modelValue:s(l).group_name,"onUpdate:modelValue":r[5]||(r[5]=t=>s(l).group_name=t),disabled:!0},null,8,["modelValue"]),e("div",je,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",qe,[He,e("div",Ie,[a(d,{modelValue:s(l).user_matricule,"onUpdate:modelValue":r[6]||(r[6]=t=>s(l).user_matricule=t),disabled:!0},null,8,["modelValue"]),e("div",Te,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ae,[Je,e("div",Oe,[a(d,{modelValue:s(l).user_responsibility_center,"onUpdate:modelValue":r[7]||(r[7]=t=>s(l).user_responsibility_center=t),disabled:!0},null,8,["modelValue"]),e("div",Qe,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",We,[Xe,e("div",Ze,[a(d,{modelValue:s(l).user_gf,"onUpdate:modelValue":r[8]||(r[8]=t=>s(l).user_gf=t),disabled:!0},null,8,["modelValue"]),e("div",Ke,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",es,[ss,e("div",ts,[a(d,{modelValue:s(l).user_nr,"onUpdate:modelValue":r[9]||(r[9]=t=>s(l).user_nr=t),disabled:!0},null,8,["modelValue"]),e("div",as,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",rs,[ls,e("div",os,[e("input",{disabled:!0,value:s(Y)(s(P)(s(l).user_gf_prom_date).format("DD MMMM YYYY")),class:"bg-white dark:bg-grayish block w-full rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,is),e("div",ns,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ds,[us,e("div",ms,[e("input",{disabled:!0,value:s(Y)(s(P)(s(l).user_nr_prom_date).format("DD MMMM YYYY")),class:"bg-white dark:bg-grayish block w-full rounded-md border-0 py-1.5 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,cs),e("div",_s,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",gs,[a(A,null,{default:i(()=>[k("Role")]),_:1}),e("div",hs,[a(s(W),{modelValue:s(g).role_id,"onUpdate:modelValue":r[10]||(r[10]=t=>s(g).role_id=t),as:"div"},{default:i(()=>[e("div",ps,[a(s(J),{class:"relative w-full cursor-default rounded-md bg-white dark:bg-grayish py-1.5 pl-3 pr-10 text-left text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-700 sm:text-sm sm:leading-6"},{default:i(()=>[e("span",fs,v(_.roles.filter(t=>t.role_id===s(g).role_id)[0].role_name),1),e("span",xs,[a(s($),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),a(j,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[a(s(O),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(m(!0),y(M,null,D(_.roles,t=>(m(),x(s(Q),{key:t.role_id,value:t.role_id,as:"template"},{default:i(({active:u,selected:c})=>[e("li",{class:h([u?"bg-cyan-600  text-white":"text-gray-900 dark:text-white","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:h([c?"font-semibold":"font-normal","block truncate"])},v(t.role_name),3),c?(m(),y("span",{key:0,class:h([u?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[a(s(B),{"aria-hidden":"true",class:"h-5 w-5"})],2)):V("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",vs,[a(s(te),{modelValue:s(g).n1_id,"onUpdate:modelValue":r[12]||(r[12]=t=>s(g).n1_id=t),as:"div"},{default:i(()=>[a(s(X),{class:"block text-sm font-medium leading-6 text-gray-900 dark:text-white"},{default:i(()=>[k("Supérieure Hiérarchique (N + 1) ")]),_:1}),e("div",ys,[a(s(Z),{"display-value":t=>{let u=_.user.n1?_.user.n1:p.value.filter(c=>c.user_id===t)[0];return u?u.user_matricule+" "+u.user_display_name:"Non défini"},class:"w-full rounded-md border-0 bg-white dark:bg-grayish py-1.5 pl-3 pr-12 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-cyan-700 sm:text-sm sm:leading-6",onChange:r[11]||(r[11]=t=>{U.keyword=f.value=t.target.value})},null,8,["display-value"]),a(s(K),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:i(()=>[a(s($),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),p.value.length>0?(m(),x(s(ee),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-grayish py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(m(!0),y(M,null,D(p.value,t=>(m(),x(s(se),{key:t.user_id,value:t.user_id,as:"template"},{default:i(({active:u,selected:c})=>[e("li",{class:h(["relative cursor-default select-none py-2 pl-3 pr-9",u?"bg-cyan-600  text-white":"text-gray-900 dark:text-white"])},[e("div",bs,[e("span",{class:h(["truncate",c&&"font-semibold"])},v((t==null?void 0:t.user_matricule)+" "+(t==null?void 0:t.user_display_name)),3)]),c?(m(),y("span",{key:0,class:h(["absolute inset-y-0 right-0 flex items-center pr-4",u?"text-white":"text-cyan-600"])},[a(s(B),{"aria-hidden":"true",class:"h-5 w-5"})],2)):V("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):V("",!0)])]),_:1},8,["modelValue"])])]),e("div",ws,[a(I,null,{default:i(()=>[k(" Enregistrer")]),_:1})])],40,De)])])])]),_:1}))}};export{Gs as default};
