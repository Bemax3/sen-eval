import{T as C,r as M,d as z,w as G,o as m,e as x,f as i,g as a,u as s,Z as R,a as e,t as v,k as y,h as S,p as j,c as b,i as D,F as Y,j as k,n as f}from"./app-90af8dda.js";import{_ as H,i as I,c as P,m as $}from"./AuthenticatedLayout-21404ea0.js";import{_ as T}from"./Breadcrumbs-ade623fb.js";import{_ as d}from"./TextInput-7a951507.js";import{_ as q}from"./SubmitButton-2f245c71.js";import{_ as A}from"./InputLabel-cbeee303.js";import{r as n}from"./LockClosedIcon-3ef21c39.js";import{r as U}from"./CheckIcon-c5d064d9.js";import{r as B}from"./ChevronUpDownIcon-8a8054f0.js";import{N as J,H as O,B as Q,U as W}from"./listbox-f01e3530.js";import{W as X,Q as Z,G as K,X as ee,J as se,Y as te}from"./combobox-9f0889c9.js";import"./logo1637145113-11387d37.js";import"./use-controllable-ba619346.js";const ae={class:"px-4 sm:px-6 lg:px-8"},le={class:"sm:flex sm:items-center"},oe={class:"sm:flex-auto"},re={class:"text-2xl font-semibold leading-6 text-gray-900"},ie=e("p",{class:"mt-2 text-sm text-gray-700"}," Informations personnelles et administratives de l'agent. ",-1),ne={class:"mt-8 shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg bg-white"},de={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8"},ue=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Informations Personnelles"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Changer les informations personnelles de cette agents")],-1),me={class:"md:col-span-2"},ce={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},_e=e("div",{class:"col-span-full flex items-center gap-x-8"},[e("img",{alt:"",class:"h-24 w-24 flex-none rounded-lg bg-cyan-600 object-cover"})],-1),ge={class:"sm:col-span-3"},fe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"Prénom",-1),pe={class:"relative shadow-sm rounded-md mt-2"},he={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},xe={class:"sm:col-span-3"},ve=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"Nom",-1),ye={class:"relative shadow-sm rounded-md mt-2"},be={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},we={class:"col-span-full"},Ve=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"email"},"Email",-1),ke={class:"relative shadow-sm rounded-md mt-2"},Ue={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ne={class:"mt-8 flex"},Ce={disabled:!0,class:"inline-flex gap-x-1.5 disabled:opacity-70 rounded-md bg-cyan-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-cyan-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600",type:"submit"},Me={class:"grid max-w-7xl grid-cols-1 gap-x-8 gap-y-10 px-4 py-16 sm:px-6 md:grid-cols-3 lg:px-8 border-t-2"},De=e("div",null,[e("h2",{class:"text-base font-semibold leading-7 text-gray-900"},"Informations Administratives"),e("p",{class:"mt-1 text-sm leading-6 text-gray-400"},"Modifier les informations administrative.")],-1),Ye=["onSubmit"],Pe={class:"grid grid-cols-1 gap-x-6 gap-y-8 sm:max-w-xl sm:grid-cols-6"},$e={class:"col-span-full"},Be=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"confirm-password"},"Organisation",-1),Fe={class:"relative shadow-sm rounded-md mt-2"},Ee={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Le={class:"col-span-full"},ze=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"confirm-password"},"Poste",-1),Ge={class:"relative shadow-sm rounded-md mt-2"},Re={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Se={class:"col-span-full"},je=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"confirm-password"},"College",-1),He={class:"relative shadow-sm rounded-md mt-2"},Ie={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Te={class:"sm:col-span-3"},qe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"Matricule",-1),Ae={class:"relative shadow-sm rounded-md mt-2"},Je={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Oe={class:"sm:col-span-3"},Qe=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"Centre de Responsabilité",-1),We={class:"relative shadow-sm rounded-md mt-2"},Xe={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ze={class:"sm:col-span-3"},Ke=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"GF",-1),es={class:"relative shadow-sm rounded-md mt-2"},ss={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ts={class:"sm:col-span-3"},as=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"NR",-1),ls={class:"relative shadow-sm rounded-md mt-2"},os={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},rs={class:"sm:col-span-3"},is=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"first-name"},"Date Promotion GF",-1),ns={class:"relative shadow-sm rounded-md mt-2"},ds=["value"],us={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ms={class:"sm:col-span-3"},cs=e("label",{class:"block text-sm font-medium leading-6 text-gray-900",for:"last-name"},"Date Promotion NR",-1),_s={class:"relative shadow-sm rounded-md mt-2"},gs=["value"],fs={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},ps={class:"sm:col-span-4"},hs={class:"mt-2"},xs={class:"relative mt-2"},vs={class:"block truncate"},ys={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},bs={class:"col-span-full"},ws={class:"relative mt-2"},Vs={class:"flex"},ks={class:"mt-8 flex"},Rs={__name:"UserProfile",props:{user:{type:Object},n1s:{type:Array},roles:{}},setup(_){const r=_,F=[{name:"Profil",href:"#",current:!0}],g=C({n1_id:r.user.n1?r.user.n1.user_id:null,role_id:r.user.role_id}),w=r.n1s,p=M(w),h=M(""),N=z({keyword:"",fields:["user_matricule","user_display_name"]}),o=(()=>C(I(r.user)?{}:{user_first_name:r.user.user_first_name||"",user_last_name:r.user.user_last_name||"",email:r.user.email||"",org_name:r.user.org?r.user.org.org_name:"",user_title:r.user.user_title||"",user_matricule:r.user.user_matricule||"",group_name:r.user.group?r.user.group.group_name:"",user_responsibility_center:r.user.user_responsibility_center||"",user_gf:r.user.user_gf||"",user_nr:r.user.user_nr||"",user_gf_prom_date:r.user.user_gf_prom_date||"",user_nr_prom_date:r.user.user_nr_prom_date||""}))(),E=()=>g.put(route("users.update",{user:r.user.user_id})),L=()=>axios.post(route("users.search"),N);return G(()=>h.value,function(V){let l=V===""?w:w.filter(t=>t.user_matricule.toLowerCase().includes(h.value.toLowerCase())||t.user_display_name.toLowerCase().includes(h.value.toLowerCase()));l.length>0?p.value=l:V.length>=3&&L().then(t=>p.value=t.data)}),(V,l)=>(m(),x(H,null,{default:i(()=>[a(s(R),{title:"Profil"}),e("div",ae,[a(T,{pages:F}),e("div",le,[e("div",oe,[e("h1",re,"Profil de "+v(_.user.user_display_name),1),ie])]),e("div",ne,[e("div",de,[ue,e("form",me,[e("div",ce,[_e,e("div",ge,[fe,e("div",pe,[a(d,{modelValue:s(o).user_first_name,"onUpdate:modelValue":l[0]||(l[0]=t=>s(o).user_first_name=t),disabled:!0},null,8,["modelValue"]),e("div",he,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",xe,[ve,e("div",ye,[a(d,{modelValue:s(o).user_last_name,"onUpdate:modelValue":l[1]||(l[1]=t=>s(o).user_last_name=t),disabled:!0},null,8,["modelValue"]),e("div",be,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",we,[Ve,e("div",ke,[a(d,{modelValue:s(o).email,"onUpdate:modelValue":l[2]||(l[2]=t=>s(o).email=t),disabled:!0},null,8,["modelValue"]),e("div",Ue,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])])]),e("div",Ne,[e("button",Ce,[y(" Enregistrer "),a(s(U),{class:"text-white -mr-0.5 h-5 w-5"})])])])]),e("div",Me,[De,e("form",{class:"md:col-span-2",onSubmit:S(E,["prevent"])},[e("div",Pe,[e("div",$e,[Be,e("div",Fe,[a(d,{modelValue:s(o).org_name,"onUpdate:modelValue":l[3]||(l[3]=t=>s(o).org_name=t),disabled:!0},null,8,["modelValue"]),e("div",Ee,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Le,[ze,e("div",Ge,[a(d,{modelValue:s(o).user_title,"onUpdate:modelValue":l[4]||(l[4]=t=>s(o).user_title=t),disabled:!0},null,8,["modelValue"]),e("div",Re,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Se,[je,e("div",He,[a(d,{modelValue:s(o).group_name,"onUpdate:modelValue":l[5]||(l[5]=t=>s(o).group_name=t),disabled:!0},null,8,["modelValue"]),e("div",Ie,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Te,[qe,e("div",Ae,[a(d,{modelValue:s(o).user_matricule,"onUpdate:modelValue":l[6]||(l[6]=t=>s(o).user_matricule=t),disabled:!0},null,8,["modelValue"]),e("div",Je,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Oe,[Qe,e("div",We,[a(d,{modelValue:s(o).user_responsibility_center,"onUpdate:modelValue":l[7]||(l[7]=t=>s(o).user_responsibility_center=t),disabled:!0},null,8,["modelValue"]),e("div",Xe,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",Ze,[Ke,e("div",es,[a(d,{modelValue:s(o).user_gf,"onUpdate:modelValue":l[8]||(l[8]=t=>s(o).user_gf=t),disabled:!0},null,8,["modelValue"]),e("div",ss,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ts,[as,e("div",ls,[a(d,{modelValue:s(o).user_nr,"onUpdate:modelValue":l[9]||(l[9]=t=>s(o).user_nr=t),disabled:!0},null,8,["modelValue"]),e("div",os,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",rs,[is,e("div",ns,[e("input",{disabled:!0,value:s(P)(s($)(s(o).user_gf_prom_date).format("DD MMMM YYYY")),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,ds),e("div",us,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ms,[cs,e("div",_s,[e("input",{disabled:!0,value:s(P)(s($)(s(o).user_nr_prom_date).format("DD MMMM YYYY")),class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6"},null,8,gs),e("div",fs,[a(s(n),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])])]),e("div",ps,[a(A,null,{default:i(()=>[y("Role")]),_:1}),e("div",hs,[a(s(Q),{modelValue:s(g).role_id,"onUpdate:modelValue":l[10]||(l[10]=t=>s(g).role_id=t),as:"div"},{default:i(()=>[e("div",xs,[a(s(J),{class:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-600 sm:text-sm sm:leading-6"},{default:i(()=>[e("span",vs,v(_.roles.filter(t=>t.role_id===s(g).role_id)[0].role_name),1),e("span",ys,[a(s(B),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})])]),_:1}),a(j,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:i(()=>[a(s(O),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(m(!0),b(Y,null,D(_.roles,t=>(m(),x(s(W),{key:t.role_id,value:t.role_id,as:"template"},{default:i(({active:u,selected:c})=>[e("li",{class:f([u?"bg-cyan-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[e("span",{class:f([c?"font-semibold":"font-normal","block truncate"])},v(t.role_name),3),c?(m(),b("span",{key:0,class:f([u?"text-white":"text-cyan-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[a(s(U),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])])]),e("div",bs,[a(s(se),{modelValue:s(g).n1_id,"onUpdate:modelValue":l[12]||(l[12]=t=>s(g).n1_id=t),as:"div"},{default:i(()=>[a(s(X),{class:"block text-sm font-medium leading-6 text-gray-900"},{default:i(()=>[y("Supérieure Hiérarchique (N + 1)")]),_:1}),e("div",ws,[a(s(Z),{"display-value":t=>{let u=_.user.n1?_.user.n1:p.value.filter(c=>c.user_id===t)[0];return u?u.user_matricule+" "+u.user_display_name:"Non défini"},class:"w-full rounded-md border-0 bg-white py-1.5 pl-3 pr-12 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-cyan-600 sm:text-sm sm:leading-6",onChange:l[11]||(l[11]=t=>{N.keyword=h.value=t.target.value})},null,8,["display-value"]),a(s(K),{class:"absolute inset-y-0 right-0 flex items-center rounded-r-md px-2 focus:outline-none"},{default:i(()=>[a(s(B),{"aria-hidden":"true",class:"h-5 w-5 text-gray-400"})]),_:1}),p.value.length>0?(m(),x(s(ee),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:i(()=>[(m(!0),b(Y,null,D(p.value,t=>(m(),x(s(te),{key:t.user_id,value:t.user_id,as:"template"},{default:i(({active:u,selected:c})=>[e("li",{class:f(["relative cursor-default select-none py-2 pl-3 pr-9",u?"bg-cyan-600 text-white":"text-gray-900"])},[e("div",Vs,[e("span",{class:f(["truncate",c&&"font-semibold"])},v((t==null?void 0:t.user_matricule)+" "+(t==null?void 0:t.user_display_name)),3)]),c?(m(),b("span",{key:0,class:f(["absolute inset-y-0 right-0 flex items-center pr-4",u?"text-white":"text-cyan-600"])},[a(s(U),{"aria-hidden":"true",class:"h-5 w-5"})],2)):k("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})):k("",!0)])]),_:1},8,["modelValue"])])]),e("div",ks,[a(q,null,{default:i(()=>[y(" Enregistrer")]),_:1})])],40,Ye)])])])]),_:1}))}};export{Rs as default};
