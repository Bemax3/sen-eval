import{o as i,c as o,a as e,t as u,n as w,k as g,d as v,e as t,f as a,g as c,F as y,j as k,u as n,r as $,w as V,b as M,T as j,Q as C}from"./app-97f24108.js";import{c as S,m as N,U as B,h,G as z,V as D,S as Y}from"./helper-00cc7808.js";import{S as A}from"./SimpleTable-17257115.js";import{_ as p,a as _}from"./EmptyState-e29df9ce.js";import{r as F}from"./ExclamationTriangleIcon-46c414a4.js";const T={class:"border-cyan-600 pr-4 py-2 sm:pr-6 flex justify-between items-center border-b"},E={key:0,class:"flex space-x-2"},G={class:"flex-shrink-0"},H={class:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-cyan-700"},L={class:"text-cyan-700"},U=e("span",{class:"text-3xl"},"/",-1),P={class:"flex-shrink-0"},Q={class:"flex h-10 w-10 items-center justify-center rounded-full border-2 border-cyan-700"},R={class:"text-cyan-700"},fe={__name:"SectionMark",props:{title:String,mark:Number,marking:Number},setup(s){return(f,l)=>(i(),o("div",T,[e("h3",{class:w([s.marking?"":"h-9","text-lg font-semibold leading-6 text-gray-900 dark:text-white"])},u(s.title),3),s.marking?(i(),o("div",E,[e("span",G,[e("span",H,[e("span",L,u(s.mark??0),1)])]),U,e("span",P,[e("span",Q,[e("span",R,u(s.marking),1)])])])):g("",!0)]))}},W={class:"min-w-full divide-y divide-gray-300 dark:divide-black"},q={class:"bg-gray-50 dark:bg-grayish"},I={class:"divide-y divide-gray-200 dark:divide-black bg-white dark:bg-grayish"},J={class:"text-base leading-6 text-gray-900 dark:text-white"},K={key:0,class:"text-white bg-gray-500 ring-gray-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"},O={key:1,class:"text-white bg-gray-500 ring-gray-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"},X=e("p",{class:"text-white bg-green-600 ring-green-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"}," Validé le ",-1),Z={key:1,class:"text-white bg-red-600 ring-red-600/20 rounded-md whitespace-nowrap mt-0.5 px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset"},pe={__name:"ValidatorsList",props:{validators:{},rating:{}},setup(s){return(f,l)=>(i(),v(A,null,{default:t(()=>[e("table",W,[e("thead",q,[e("tr",null,[a(p,{first:!0},{default:t(()=>[c("Agent")]),_:1}),a(p,null,{default:t(()=>[c("Commentaire")]),_:1}),a(p,null,{default:t(()=>[c("Date de validation")]),_:1})])]),e("tbody",I,[(i(!0),o(y,null,k(s.validators,r=>(i(),o("tr",{key:r.rating_validator_id},[a(_,{first:!0,class:"flex items-start gap-x-2"},{default:t(()=>[e("p",J,u(r.user.user_display_name),1),r.validator_id===s.rating.evaluated_id?(i(),o("p",K," Évalué ")):g("",!0),r.validator_id===s.rating.evaluator_id?(i(),o("p",O," Évaluateur ")):g("",!0)]),_:2},1024),a(_,{class:"whitespace-pre-line"},{default:t(()=>[c(u(r.rating_validator_comment||"Pas de commentaire."),1)]),_:2},1024),a(_,{class:"flex items-start gap-x-3"},{default:t(()=>[r.validated_at?(i(),o(y,{key:0},[X,c(" "+u(n(S)(n(N)(r.validated_at).format("DD MMMM YYYY á HH:mm"))),1)],64)):(i(),o("p",Z," Non Validé "))]),_:2},1024)]))),128))])])]),_:1}))}},ee=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),te={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},ae={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},se={class:"sm:flex sm:items-start"},ie={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},re={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},ne=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500 dark:text-gray-100"},"Êtes vous sûre de vouloir valider cet évaluation? Aprés validation par toute les parties aucune modification ne pourra être apportés. Cette action est irréversible. ")],-1),oe={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},_e={__name:"ValidationWarning",props:{opened:{type:Boolean,default:!1},validation:{}},emits:["closeModal"],setup(s){const f=s,l=$(!1);V(()=>f.opened,d=>{l.value=d},{immediate:!0});const r=M(()=>j({validator_id:f.validation.validator_id,has_validated:!0})),b=()=>{r.value.put(route("validations.update",{validation:f.validation.rating_validator_id}),{onError:d=>{C().props.flash.notify={type:"error",message:d.has_validated}},preserveScroll:!0})};return(d,m)=>(i(),v(n(Y),{show:l.value,as:"template"},{default:t(()=>[a(n(B),{as:"div",class:"relative z-10",onClose:m[2]||(m[2]=x=>{l.value=!1,d.$emit("closeModal")})},{default:t(()=>[a(n(h),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:t(()=>[ee]),_:1}),e("div",te,[e("div",ae,[a(n(h),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:t(()=>[a(n(z),{class:"relative transform overflow-hidden rounded-lg bg-white dark:bg-grayish px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6"},{default:t(()=>[e("div",se,[e("div",ie,[a(n(F),{"aria-hidden":"true",class:"h-6 w-6 text-red-600"})]),e("div",re,[a(n(D),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"},{default:t(()=>[c("Validation")]),_:1}),ne])]),e("div",oe,[e("button",{class:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",type:"button",onClick:m[0]||(m[0]=x=>{b(),l.value=!1,d.$emit("closeModal")})},"Valider "),e("button",{ref:"cancelButtonRef",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white dark:bg-grayish px-3 py-2 text-sm font-semibold text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",type:"button",onClick:m[1]||(m[1]=x=>{l.value=!1,d.$emit("closeModal")})},"Annuler ",512)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}};export{fe as _,pe as a,_e as b};
